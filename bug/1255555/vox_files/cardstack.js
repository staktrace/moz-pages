var VoxCardStackEmbed=function(e){function t(){n(),v=document.querySelectorAll(m),i();for(var e=0,t=v.length;t>e;e++){var r=v[e];if("true"!==r.getAttribute("data-rendered")){var a=r.children,d=a[0];if("undefined"!=typeof d){var s=d.getAttribute("href"),o=d.text.trim();d.setAttribute("class","vox-cardstack__embed--mobile");var b=l(o,s);c(r,b);var f=u(s);c(r,f);var h=r.getAttribute("class").split(" ");h.push("vox-cardstack__embed"),r.setAttribute("class",h.join(" ")),r.setAttribute("data-rendered",!0)}}}}function r(e){var t={url:document.URL};a(e,t)}function a(e,t){var r=e.querySelector("iframe");r&&r.contentWindow&&(t.sender="Vox",r.contentWindow.postMessage(t,"*"))}function n(){var e=window.addEventListener?"addEventListener":"attachEvent",t=window[e],a="attachEvent"==e?"onmessage":"message";t(a,function(e){if(e.data&&"Vox"==e.data.sender&&e.data.backgroundUrl&&e.data.url)for(var t=e.data.backgroundUrl,a=e.data.url,n='.vox-cardstack__embed--mobile-cover a[href^="'+a+'"]',d=document.querySelectorAll(n),i=0,s=d.length;s>i;i++){var l=d[i];if(l&&l.parentNode){l.parentNode.setAttribute("style",'background-image:url("'+t+'")');var u=l.parentNode.parentNode,b=o(a);c(u,b),r(u)}}},!1)}function d(){null===b&&(script=document.querySelector('script[src$="/cardstack.js"]'),null!==script&&(b=script.getAttribute("src").replace(/\.js$/,".css")))}function i(){if(!e.hasAddedStylesheet&&(d(),null!==b)){var t=document.createElement("link");t.setAttribute("media","all"),t.setAttribute("type","text/css"),t.setAttribute("rel","stylesheet"),t.setAttribute("href",b);var r=document.getElementsByTagName("body")[0];r.appendChild(t),e.hasAddedStylesheet=!0}}function c(e,t){e.appendChild(t)}function s(e,t){var r=document.createTextNode(t.trim());e.appendChild(r)}function o(e){var t=document.createElement("a");return t.setAttribute("class","vox-cardstack__embed--fullstack"),t.setAttribute("href",e),t.setAttribute("target","_blank"),t}function l(e,t){var r=document.createElement("div");r.setAttribute("class","vox-cardstack__embed--mobile-cover"),r.setAttribute("style","background-color: #6d98a8");var a=document.createElement("h2");a.setAttribute("class","vox-cardstack__embed--mobile-header"),s(a,e);var n=document.createElement("a");return n.setAttribute("class","vox-cardstack__embed--mobile-launch"),n.setAttribute("href",t),n.setAttribute("target","_blank"),s(n,"Launch Card Stack!"),r.appendChild(a),r.appendChild(n),r}function u(e){var t=e.split("/cards/");e=t[0]+"/embed/cards/"+t[1];var r={src:e,frameborder:"0",allowTransparency:"true",allowfullscreen:"true","class":"vox-cardstack__embed--iframe"},a=document.createElement("iframe");for(var n in r)r.hasOwnProperty(n)&&a.setAttribute(n,r[n]);return a}e.isInitialized=e.isInitialized||!1,e.hasAddedStylesheet=e.hasAddedStylesheet||!1;var b=null,m='.vox-cardstack:not([data-rendered="true"])',v=[];return e.init=function(){e.isInitialized||(e.isInitialized=!0,window.addEventListener&&window.addEventListener("DOMContentLoaded",t,!1))},e}(VoxCardStackEmbed||{});VoxCardStackEmbed.init();