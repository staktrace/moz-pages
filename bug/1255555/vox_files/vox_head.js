function BrightcoveWrapper(e,t,n){var r=this,o=function(){},i="4063572901001";this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.meta.type="brightcove",this.options=n=jQuery.extend({autoplay:!1,account_id:i,callback:o,onAdsPlayed:o,onCreate:o,onPlay:o},window.brightcove_options||{},n||{}),this.insertVideoTag.call(this,this.$el),this.perfMark("brightcoveInitializeStart"),yepnope({load:r.getPlayerUrl(n),complete:function(){r.setupPlayer(n),r.options.callback()}})}function OoyalaWrapper(e,t,n){function r(e){var t=e.mb,r=!1,i=function(r){t.unsubscribe("initialPlay","basePlaying"),t.unsubscribe("playing","basePlaying"),o.perfMark("ooyalaUserPlay"),o.pub("ooyalaVideoPlay"),o.markAsViewed(!0),Chorus.Analytics.event(o.formatEvent("play")),n.onPlay(e,!1),t.subscribe("disablePlaybackControls","basePlaying",function(e){t.unsubscribe("disablePlaybackControls","basePlaying"),o.perfMark("ooyalaFirstFrame"),o.perfMeasure("ttff","ooyalaUserPlay","ooyalaFirstFrame")})};t.subscribe("initialPlay","basePlaying",i),t.subscribe("playing","basePlaying",i),t.subscribe("downloading","basePlaying",function(e,n){t.unsubscribe("downloading","basePlaying"),r=!0}),t.subscribe("embedCodeChanged","discovery",function(e,n){r&&t.subscribe("contentTreeFetched","discovery",function(e,n){t.unsubscribe("contentTreeFetched","discovery");var r=n.title+" | discovery",i=o.formatEvent("play");i.eventLabel=r,Chorus.Analytics.event(i)}),r=!0}),t.subscribe("adsPlayed","taprAdsPlayed",function(e){t.unsubscribe("adsPlayed","taprAdsPlayed"),o.perfMark("ooyalaVideoStart"),t.subscribe("playing","taprPlaying",function(e){t.unsubscribe("playing","taprPlaying"),o.perfMark("ooyalaVideoPlay"),o.perfMeasure("tapr","ooyalaVideoStart","ooyalaVideoPlay")})}),t.subscribe("error","baseError",function(e){Chorus.Analytics.event(o.formatEvent("error"))}),t.subscribe("adsPlayed","baseAdsPlayed",function(r){t.unsubscribe("adsPlayed","baseAdsPlayed"),n.onAdsPlayed(e)}),t.subscribe(window[n.namespace].EVENTS.PLAYBACK_READY,"basePlayer",function(e){t.unsubscribe(window[n.namespace].EVENTS.PLAYBACK_READY,"basePlayer"),o.pub("ooyalaVideoReady"),o.perfMark("ooyalaVideoReady"),o.perfMeasure("loadtime","ooyalaInitializeStart","ooyalaVideoReady"),o.perfLoadComplete()})}var o=this,i=function(){};t.type=t.type||"ooyala",this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.options=n=jQuery.extend({autoplay:!1,namespace:"OO",platform:"html5-fallback",player_id:window.ooyala_player_id||"",callback:i,onAdsPlayed:i,onCreate:i,onPlay:i,initialTime:n&&n.hasOwnProperty("volumeStartTime")?n.volumeStartTime:0},window.ooyala_options||{},n||{}),o.perfMark("ooyalaInitializeStart"),yepnope({test:window[n.namespace],nope:o.getOoyalaParams(n),complete:function(){var i=window[n.namespace];i.ready(function(){o.perfLoadStart(),o.player=i.Player.create(e,t.ooyala_id||t.provider_video_id,n),r(o.player),n.callback(o.player)})}})}function YoutubeWrapper(e,t,n){function r(e){e.data===YT.PlayerState.PLAYING?(n.onPlay(o.player),i||(Chorus.Analytics.event(o.formatEvent("play")),o.pub("youtubeVideoPlay"),i=!0)):e.data===YT.PlayerState.PAUSED&&n.onPause(o.player)}var o=this,i=!1,a=function(){};t.type=t.type||"youtube";var s=jQuery("<div>").attr("id","youtube-video-inside-wrapper-"+e);jQuery("#"+e).html(s),e=s.attr("id"),this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.options=n=jQuery.extend({autoplay:!1,controls:1,modestbranding:1,rel:0,showInfo:0,onAdsPlayed:a,onCreate:a,onPause:a,onPlay:a,onPlayerReady:a,onPreRollEnd:a,timedEvents:{},start:n.hasOwnProperty("volumeStartTime")?n.volumeStartTime:0},n||{}),n.autoplay=n.autoplay?1:0,Chorus.Video.youtubeApiLoaded||Chorus.Video.loadYoutubeApi(),this.init=function(){o.player=new YT.Player(e,{videoId:t.youtube_id||t.provider_video_id,playerVars:n,events:{onReady:n.onCreate,onStateChange:r},width:"100%",height:"100%"})},"undefined"!=typeof YT&&YT.Player?o.init():(YoutubeWrapper.initQueue.push(o),window.onYouTubeIframeAPIReady=function(){for(var e=0;e<YoutubeWrapper.initQueue.length;e++)YoutubeWrapper.initQueue[e].init()})}function EmbedWrapper(e,t,n){this.$el=jQuery("#"+e),this.elementId=e,this.meta=t,this.options=n=n||this.options;var r=t.provider_video_id;n.autoplay&&(r=Util.addQueryParam("autoplay","1",r));this.$el.html(r).find("iframe")}window.Modernizr=function(e,t,n){function r(e){g.cssText=e}function o(e,t){return typeof e===t}function i(e,t){return!!~(""+e).indexOf(t)}function a(e,t){for(var r in e){var o=e[r];if(!i(o,"-")&&g[o]!==n)return"pfx"==t?o:!0}return!1}function s(e,t,r){for(var i in e){var a=t[e[i]];if(a!==n)return r===!1?e[i]:o(a,"function")?a.bind(r||t):a}return!1}function l(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+C.join(r+" ")+r).split(" ");return o(t,"string")||o(t,"undefined")?a(i,t):(i=(e+" "+S.join(r+" ")+r).split(" "),s(i,t,n))}function d(){f.input=function(n){for(var r=0,o=n.length;o>r;r++)A[n[r]]=n[r]in b;return A.list&&(A.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),A}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var u,c,p="2.7.1",f={},h=!0,m=t.documentElement,v="modernizr",y=t.createElement(v),g=y.style,b=t.createElement("input"),w=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),_="Webkit Moz O ms",C=_.split(" "),S=_.toLowerCase().split(" "),k={},A={},P=[],E=P.slice,T=function(e,n,r,o){var i,a,s,l,d=t.createElement("div"),u=t.body,c=u||t.createElement("body");if(parseInt(r,10))for(;r--;)s=t.createElement("div"),s.id=o?o[r]:v+(r+1),d.appendChild(s);return i=["&#173;",'<style id="s',v,'">',e,"</style>"].join(""),d.id=v,(u?d:c).innerHTML+=i,c.appendChild(d),u||(c.style.background="",c.style.overflow="hidden",l=m.style.overflow,m.style.overflow="hidden",m.appendChild(c)),a=n(d,e),u?d.parentNode.removeChild(d):(c.parentNode.removeChild(c),m.style.overflow=l),!!a},x={}.hasOwnProperty;c=o(x,"undefined")||o(x.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return x.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=E.call(arguments,1),r=function(){if(this instanceof r){var o=function(){};o.prototype=t.prototype;var i=new o,a=t.apply(i,n.concat(E.call(arguments)));return Object(a)===a?a:i}return t.apply(e,n.concat(E.call(arguments)))};return r}),k.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:T(["@media (",w.join("touch-enabled),("),v,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},k.history=function(){return!!e.history&&!!history.pushState},k.backgroundsize=function(){return l("backgroundSize")},k.cssanimations=function(){return l("animationName")},k.csstransforms3d=function(){var e=!!l("perspective");return e&&"webkitPerspective"in m.style&&T("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=9===t.offsetLeft&&3===t.offsetHeight}),e},k.csstransitions=function(){return l("transition")},k.localstorage=function(){try{return localStorage.setItem(v,v),localStorage.removeItem(v),!0}catch(e){return!1}};for(var V in k)c(k,V)&&(u=V.toLowerCase(),f[u]=k[V](),P.push((f[u]?"":"no-")+u));return f.input||d(),f.addTest=function(e,t){if("object"==typeof e)for(var r in e)c(e,r)&&f.addTest(r,e[r]);else{if(e=e.toLowerCase(),f[e]!==n)return f;t="function"==typeof t?t():t,"undefined"!=typeof h&&h&&(m.className+=" "+(t?"":"no-")+e),f[e]=t}return f},r(""),y=b=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=g.elements;return"string"==typeof e?e.split(" "):e}function o(e){var t=y[e[m]];return t||(t={},v++,e[m]=v,y[v]=t),t}function i(e,n,r){if(n||(n=t),u)return n.createElement(e);r||(r=o(n));var i;return i=r.cache[e]?r.cache[e].cloneNode():h.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!i.canHaveChildren||f.test(e)||i.tagUrn?i:r.frag.appendChild(i)}function a(e,n){if(e||(e=t),u)return e.createDocumentFragment();n=n||o(e);for(var i=n.frag.cloneNode(),a=0,s=r(),l=s.length;l>a;a++)i.createElement(s[a]);return i}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return g.shivMethods?i(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(g,t.frag)}function l(e){e||(e=t);var r=o(e);return g.shivCSS&&!d&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||s(e,r),e}var d,u,c="3.7.0",p=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,h=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,m="_html5shiv",v=0,y={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",d="hidden"in e,u=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){d=!0,u=!0}}();var g={elements:p.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:c,shivCSS:p.shivCSS!==!1,supportsUnknownElements:u,shivMethods:p.shivMethods!==!1,type:"default",shivDocument:l,createElement:i,createDocumentFragment:a};e.html5=g,l(t)}(this,t),f._version=p,f._prefixes=w,f._domPrefixes=S,f._cssomPrefixes=C,f.testProp=function(e){return a([e])},f.testAllProps=l,f.testStyles=T,f.prefixed=function(e,t,n){return t?l(e,t,n):l(e,"pfx")},m.className=m.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+P.join(" "):""),f}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==v.call(e)}function o(e){return"string"==typeof e}function i(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=y.shift();g=1,e?e.t?h(function(){("c"==e.t?p.injectCss:p.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):g=0}function l(e,n,r,o,i,l,d){function u(t){if(!f&&a(c.readyState)&&(b.r=f=1,!g&&s(),c.onload=c.onreadystatechange=null,t)){"img"!=e&&h(function(){_.removeChild(c)},50);for(var r in P[n])P[n].hasOwnProperty(r)&&P[n][r].onload()}}var d=d||p.errorTimeout,c=t.createElement(e),f=0,v=0,b={t:r,s:n,e:i,a:l,x:d};1===P[n]&&(v=1,P[n]=[]),"object"==e?c.data=n:(c.src=n,c.type=e),c.width=c.height="0",c.onerror=c.onload=c.onreadystatechange=function(){u.call(this,v)},y.splice(o,0,b),"img"!=e&&(v||2===P[n]?(_.insertBefore(c,w?null:m),h(u,d)):P[n].push(c))}function d(e,t,n,r,i){return g=0,t=t||"j",o(e)?l("c"==t?S:C,e,t,this.i++,n,r,i):(y.splice(this.i++,0,e),1==y.length&&s()),this}function u(){var e=p;return e.loader={load:d,i:0},e}var c,p,f=t.documentElement,h=e.setTimeout,m=t.getElementsByTagName("script")[0],v={}.toString,y=[],g=0,b="MozAppearance"in f.style,w=b&&!!t.createRange().compareNode,_=w?f:m.parentNode,f=e.opera&&"[object Opera]"==v.call(e.opera),f=!!t.attachEvent&&!f,C=b?"object":f?"script":"img",S=f?"script":C,k=Array.isArray||function(e){return"[object Array]"==v.call(e)},A=[],P={},E={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};p=function(e){function t(e){var t,n,r,e=e.split("!"),o=A.length,i=e.pop(),a=e.length,i={url:i,origUrl:i,prefixes:e};for(n=0;a>n;n++)r=e[n].split("="),(t=E[r.shift()])&&(i=t(i,r));for(n=0;o>n;n++)i=A[n](i);return i}function a(e,o,i,a,s){var l=t(e),d=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(o&&(o=r(o)?o:o[e]||o[a]||o[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,o,i,a,s):(P[l.url]?l.noexec=!0:P[l.url]=1,i.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(r(o)||r(d))&&i.load(function(){u(),o&&o(l.origUrl,s,a),d&&d(l.origUrl,s,a),P[l.url]=2})))}function s(e,t){function n(e,n){if(e){if(o(e))n||(c=function(){var e=[].slice.call(arguments);p.apply(this,e),f()}),a(e,c,t,0,d);else if(Object(e)===e)for(l in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--s&&(r(c)?c=function(){var e=[].slice.call(arguments);p.apply(this,e),f()}:c[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),f()}}(p[l])),a(e[l],c,t,l,d))}else!n&&f()}var s,l,d=!!e.test,u=e.load||e.both,c=e.callback||i,p=c,f=e.complete||i;n(d?e.yep:e.nope,!!u),u&&n(u)}var l,d,c=this.yepnope.loader;if(o(e))a(e,0,c,0);else if(k(e))for(l=0;l<e.length;l++)d=e[l],o(d)?a(d,0,c,0):k(d)?p(d):Object(d)===d&&s(d,c);else Object(e)===e&&s(e,c)},p.addPrefix=function(e,t){E[e]=t},p.addFilter=function(e){A.push(e)},p.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",c=function(){t.removeEventListener("DOMContentLoaded",c,0),t.readyState="complete"},0)),e.yepnope=u(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,r,o,l,d){var u,c,f=t.createElement("script"),o=o||p.errorTimeout;f.src=e;for(c in r)f.setAttribute(c,r[c]);n=d?s:n||i,f.onreadystatechange=f.onload=function(){!u&&a(f.readyState)&&(u=1,n(),f.onload=f.onreadystatechange=null)},h(function(){u||(u=1,n(1))},o),l?f.onload():m.parentNode.insertBefore(f,m)},e.yepnope.injectCss=function(e,n,r,o,a,l){var d,o=t.createElement("link"),n=l?s:n||i;o.href=e,o.rel="stylesheet",o.type="text/css";for(d in r)o.setAttribute(d,r[d]);a||(m.parentNode.insertBefore(o,m),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},window.Chorus=window.Chorus||{},Chorus.Modernizr=window.Modernizr,function(e){if(!e.browser){e.browser={chrome:!1,mozilla:!1,opera:!1,msie:!1,safari:!1,version:0};var t=navigator.userAgent;t.indexOf("Chrome")>-1?e.browser.chrome=!0:t.indexOf("Safari")>-1?e.browser.safari=!0:t.indexOf("Opera")>-1?e.browser.opera=!0:t.indexOf("Firefox")>-1?e.browser.mozilla=!0:navigator.userAgent.match(/MSIE ([0-9]+)\./)&&(e.browser.msie=!0,e.browser.version=parseFloat(RegExp.$1))}}(jQuery);var AH=function(e){function t(e,t){this._firstAdRendered||(this._firstAdRendered=!0,n("first_ad_rendered"),Chorus.EventDispatcher.publish("first_ad_rendered",t,!0)),n("rendering_complete"),"undefined"!=typeof Chorus&&Chorus.EventDispatcher&&Chorus.EventDispatcher.publish(e,t,!0)}function n(e){"object"==typeof performance&&"function"==typeof performance.mark&&performance.mark("ad_"+e)}this._adPayloadHasBeenFetched=!1,this._customVariables={},this._adSlots={},this._adUnitsToShow=null,this._pageScope=null,this._adUnitScopes=null,this._debugging=!1,this._fetchDisabled=!1,this._skippedAdSlots=[],this._definedSlots={},this._useAsync=!1,this._firstAdRendered=!1,this._servicesEnabled=!1,this._deferredAdsEnabled=!1,this._adUnitsLoading=0,this._adsLoadedQueue=[],this._phonographToSample={},this.log_to_console=function(e){if("undefined"!=typeof SBN&&SBN.Campaigns&&SBN.Campaigns.log(e),Chorus&&Chorus.Context){var t=Chorus.Context.current_env;("staging"===t||"development"===t)&&console.log(e)}},this.disableFetch=function(){this._fetchDisabled=!0},this.enableDeferredAds=function(){this._deferredAdsEnabled=!0},this.enableSmartwrapper=function(){this._smartwrapperEnabled=!0},this.useAsync=function(){this._useAsync=!0},this.addVariable=function(t,n){this._customVariables[t]=n,e.cmd.push(function(){e.pubads().setTargeting(t,n)})},this.removeVariable=function(t){delete this._customVariables[t],e.cmd.push(function(){e.pubads().setTargeting(t,null)})},this.customVariables=function(){return this._customVariables},this.setAdUnitScopes=function(e){this._adUnitScopes=e},this.setPageScope=function(e){this._pageScope=e;for(var t in e)this.addVariable(t,e[t])},this.getPageScope=function(e){return null===this._pageScope?null:this._pageScope[e]},this.detectWebview=function(){var e=window.navigator.userAgent;e.match(/Twitter/)?this.addVariable("webview","twitter"):e.search("FBAN")>=0?this.addVariable("webview","facebook"):e.match(/Pinterest/)?this.addVariable("webview","pinterest"):e.match(/AppleWebKit/)&&!e.match(/Safari/)&&this.addVariable("webview","undetermined")},this.setAdUnitsOnPage=function(e){this._adUnitsOnPage=e},this.addAdUnitToPage=function(e){for(var t=this._adUnitsOnPage.concat(e),n=[],r=0;r<t.length;r++){var o=t[r];-1===n.indexOf(o)&&n.push(o)}this._adUnitsOnPage=n},this.isAdUnitInScope=function(e){if(!this.isUsingScope())return!0;var t=this._adUnitScopes[e];if(!t)return!0;for(var n in this._pageScope)if(this._pageScope.hasOwnProperty(n)){var r=this._pageScope[n],o=t[n];if(o&&!this.arrayInclude(o,r)){this._skippedAdSlots.push(e);var i="Ad unit "+e+' skipped for scope "'+r+'". Available values are: '+o.join(", ")+".";return this.log_to_console(i),jQuery("#ads_info_ad_units_skipped").append(" "+e),!1}}return!0},this.isUsingScope=function(){return null!==this._pageScope&&null!==this._adUnitScopes},this.getActiveAdUnits=function(){var e=[];if("undefined"!=typeof this._adUnitsOnPage){for(var t=0;t<this._adUnitsOnPage.length;++t){var n=this._adUnitsOnPage[t];this.isAdUnitInScope(n)&&e.push(n)}return e}},this.queueAd=function(e){var t=this;this._servicesEnabled?this.showAd(e):(this._pendingSlots=this._pendingSlots||[],this._pendingSlots.push(function(){t.showAd(e)}))},this.showAd=function(t){function n(){e.display("div-gpt-ad-"+t),o._definedSlots[t].loadStart=Date.now()}function r(){e.pubads().refresh([o._definedSlots[t].slot]),o._definedSlots[t].refreshed=!0}var o=this;return this._adUnitsToShow&&!this.arrayInclude(this._adUnitsToShow,t)?(this.log_to_console("Skipping",t),!1):(e.cmd.push(n),(!this._smartwrapperEnabled||this._deferredAdsEnabled&&"complete"===document.readyState)&&e.cmd.push(r),void(this._adPayloadHasBeenFetched||(this._adPayloadHasBeenFetched=!0,this._recordDFPRequestParameters())))},this.recordSlot=function(e,t,n,r){var o={};if(r)for(var i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);o.slug=e,o.sizes=n,this._adSlots[t]=o},this.defineSlots=function(){var e=this;this._adUnitsToShow.forEach(function(t){try{e._defineSlot(t)}catch(n){e.log_to_console(n)}})},this._defineSlot=function(t){var n=this._adSlots[t],r="div-gpt-ad-"+t,o=n.targeting,i=n.sonobi_id,a=e.defineSlot(n.slug,n.sizes,r).set("slot_name",t);if(a.addService(e.pubads()),a.setTargeting("position",t),i&&"undefined"!=typeof sbi_morpheus&&sbi_morpheus.register(r,i),-1!==t.indexOf("prelude")&&a.setCollapseEmptyDiv(!0,!0),o)for(var s=0;s<o.length;++s)a.setTargeting(o[s][0],o[s][1]);if(this._definedSlots[t]={slot:a,refreshed:!1,loaded:!1,hymnal:!1},this._smartwrapperEnabled)try{TN8.SmartWrapper.attachSlot(t,a)}catch(l){this.log_to_console(l)}return!0},this.initTechnorati=function(){try{TN8.SmartWrapper.setTargeting()}catch(e){this.log_to_console(e)}},this.testTechnorati=function(){return!!("TN8"in window&&TN8.SmartWrapper)},this.setCreativeId=function(){e.pubads().addEventListener("slotRenderEnded",function(e){if(e.slot&&null!==e.slot.get("slot_name")&&e.creativeId){var t=document.getElementById(e.slot.l.m),n=t.getElementsByClassName("creative-id")[0];n.value=e.creativeId}})},this.fetchAds=function(){SBN.adStart=Date.now();var t=this;this.addVariable("async",this._useAsync.toString());var r=this.getActiveAdUnits();r.slice(0);if(this._fetchDisabled)return!1;if(this._smartwrapperEnabled=this._smartwrapperEnabled&&this.testTechnorati(),this._adUnitsToShow=r,this.defineSlots(),n("slots_defined"),this.phonographDefinedCall(),this._smartwrapperEnabled)this.initTechnorati();else if("undefined"!=typeof sbi_morpheus)try{sbi_morpheus.callOperator()}catch(o){this.log_to_console("Oops Sonobi had a problem",o)}e.cmd.push(function(){e.pubads().addEventListener("slotRenderEnded",t._slotRenderHandler.bind(t)),"undefined"!=typeof Krux&&(e.pubads().setTargeting("ksg",Krux.segments),e.pubads().setTargeting("kuid",Krux.user)),n("requested_from_server"),e.enableServices(),t._servicesEnabled=!0,t._deferredAdsEnabled&&t._pendingSlots&&t._clearFnQueue(t._pendingSlots)}),KxVox={};for(var i in this._customVariables)KxVox[i]=this._customVariables[i];this._adsLoadedQueue.push(this._recordAdsLoaded.bind(this)),this._deferredAdsEnabled&&Promise?this._adLoadingPromise().then(this._onLoadHandler.bind(t)).then(void 0,function(e){t.log_to_console(e)}):(this._onLoadHandler(),this._removeUnfetchedAdSlots())},this.phonographDefinedCall=function(){if(this.phonographSample()){var e=this.phonographSharedValues();e.adSlots=Object.keys(this._definedSlots).length,phonographQueue.push(["adImpressions",e]);var t="undefined"==typeof adblockJsFile?"blocked":this._smartwrapperEnabled;phonographQueue.push(["technoratiEnabled",{enabled:t}])}},this.phonographLoadedCall=function(){if(this.phonographSample()){var e=this.phonographSharedValues();e.loadedUnits=Object.keys(this._definedSlots).filter(this.activeUnitFilter).length,phonographQueue.push(["adImpressions",e])}},this.phonographSharedValues=function(){return{slug:window.Chorus.Context.network_slug,deviceType:Util.UserAgentProfiler.deviceTypeForAds(),path:window.location.pathname}},this.phonographSample=function(e){var t=1,n=42,e=e||100,r=this._phonographToSample[e]||null;if(!r){var o=Math.floor(Math.random()*(e-t+1))+t;this._phonographToSample[e]=o===n}return this._phonographToSample[e]},this.activeUnitFilter=function(e){return SBN.Ads._definedSlots[e].loaded},this._adLoadingPromise=function(){return this._loadPromise||(this._loadPromise=new Promise(function(e,t){return"complete"===document.readyState?e():window.addEventListener("load",function(){return e()})})),this._loadPromise},this._slotRenderHandler=function(e){if(e.slot&&null!==e.slot.get("slot_name")){var n={lineItem:e.lineItemId,size:e.size,isEmpty:e.isEmpty};-1!==e.slot.get("slot_name").indexOf("native")||e.isEmpty||this._listenForSlotLoad(e);var r="dfp:adRendered:"+e.slot.get("slot_name");t(r,n)}},this._listenForSlotLoad=function(e){var t=e.slot.get("slot_name"),n="div-gpt-ad-"+t,r=document.getElementById(n).getElementsByTagName("iframe")[0],o=-1===r.contentWindow.document.children[0].innerHTML.indexOf("hymnal"),i=t.indexOf("native")>-1;this._definedSlots[t].hymnal=!o,r&&o&&!i&&(this._adUnitsLoading++,r.addEventListener("load",function(){this._handleSlotLoad(t)}.bind(this)))},this._handleSlotLoad=function(e){this._adUnitsLoading--,this._definedSlots[e].loadEnd=Date.now(),this._definedSlots[e].loadTime=this._definedSlots[e].loadEnd-this._definedSlots[e].loadStart,this._definedSlots[e].loaded=!0,this._adLoadedEventTimeout=this._adLoadedEventTimeout||setTimeout(this._adUnitsLoadedEvent,2e4,!0),0===this._adUnitsLoading&&this._adsLoadedHandler()},this._adsLoadedHandler=function(e){clearTimeout(this._adLoadedEventTimeout),this._adsLoadedQueue.length>0&&(this._adsLoadedQueue=this._clearFnQueue(this._adsLoadedQueue)),SBN.Ads.phonographLoadedCall()},this._recordAdsLoaded=function(){if(window.webpagetest&&window.webpagetest.done(),n("third_pary_ads_loaded"),SBN.adStart){var e=(Date.now()-SBN.adStart).toString();SBN.adLoadTime=e+"ms",this.log_to_console("Ad loading took "+e+"ms to finish.")}},this._onLoadHandler=function(){if(!this._smartwrapperEnabled){e.cmd.push(function(){e.pubads().refresh()});for(var t in this._definedSlots)this._definedSlots[t].refreshed=!0}this._removeUnfetchedAdSlots()},this._clearFnQueue=function(e,t){for(var n=e;n.length>0;){var r=n.shift();t?r.call(t):r()}return n},this._removeUnfetchedAdSlots=function(){for(var e=this._skippedAdSlots,t=0;t<e.length;t++){var n=e[t],r=jQuery("#div-gpt-ad-"+n),o=r.parent(".m-ad");r.remove(),0===o.children().size()&&o.remove()}},this._recordDFPRequestParameters=function(){var e=jQuery('script[src*="gampad/ads"]'),t=e.length?e.attr("src"):"",n=t.indexOf("&trunc=1")>0;"undefined"!=typeof dataLayer&&dataLayer.push&&dataLayer.push({"DFP Targeting Truncated":n,"DFP Targeting Length":t.length})},this.arraySubtract=function(e,t){for(var n=[],r=0;r<e.length;++r){for(var o=!1,i=0;i<t.length;++i)if(e[r]===t[i]){o=!0;break}o||n.push(e[r])}return n},this.arrayIntersection=function(e,t){for(var n=[],r=0;r<e.length;++r)for(var o=0;o<t.length;++o)if(e[r]===t[o]&&!this.arrayInclude(n,e[r])){n.push(e[r]);break}return n},this.arrayIndexOf=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},this.arrayInclude=function(e,t){return-1!==this.arrayIndexOf(e,t)}};jQuery(function(){var e=location.search.match(/hymnal_id=([^&#]+)/);if(e){var t=document.createElement("script");t.src="http://hymnal.voxmedia.com/ads/"+e[1]+"/design_script",document.body.appendChild(t)}});var Chorus=Chorus||{},CA=Chorus.Analytics=CA||{};!function(){function e(){return window.innerHeight||p&&p.clientHeight||document.body.clientHeight}function t(){return window.innerWidth||p&&p.clientWidth||document.body.clientWidth}function n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}return e}function r(e,t){var n=null,r=!1,o=function(){return n?void(r=!0):(e(),void(n=setTimeout(function(){var e=r;n=null,r=!1,e&&o()},t)))};return o}function o(e,t){var n;if(c)return c(e).each(t);if("string"==typeof e?n=document.querySelectorAll(e):e instanceof NodeList?n=e:e instanceof Element&&(n=[e]),n)for(var r=0;r<n.length;r++)t.call(n[r])}function i(e,t,n){c?c(e).on(t,n):e.addEventListener?e.addEventListener(t,n):e.attachEvent&&e.attachEvent("on"+t,n)}function a(e,t,n){return n=n||{},function(){for(var r=arguments[0]instanceof Array?arguments[0]:arguments,o=0,i={},a=0;a<r.length||o<t.length;a++){var s=r[a];if("function"==typeof s)i.eventCallback=s;else if("boolean"==typeof s)s&&(i.eventNonInt=s);else if("object"==typeof s)for(var l in s)s.hasOwnProperty(l)&&(i[n[l]||l]=s[l]);else if(t[o]){var d=t[o++];i.hasOwnProperty(d)||(i[d]=s)}}return i.event=e,i}}function s(e,t){return function(){var n=arguments[0]instanceof Array?arguments[0]:Array.prototype.slice.call(arguments);n.length&&(n[0].match&&n[0].match(/send|_track/)&&n.shift(),n[0]===e.toLowerCase()&&n.shift(),CA.push(t(n)))}}function l(n){var r=n&&n.getBoundingClientRect();return r&&r.bottom>0&&r.right>0&&r.top<e()&&r.left<t()}var d=[25,50,75,90],u=[],c=window.jQuery,p=document.documentElement,f=c||function(){var e,t=[],n=document,r=n.documentElement.doScroll,o="DOMContentLoaded",i=(r?/^loaded|^c/:/^loaded|^i|^c/).test(n.readyState);return i||n.addEventListener(o,e=function(){for(n.removeEventListener(o,e),i=1;e=t.shift();)e()}),function(e){i?e():t.push(e)}}(),h=a("analyticsEvent",["eventCategory","eventAction","eventLabel","eventValue","eventNonInt"],{nonInteraction:"eventNonInt",hitCallback:"eventCallback"}),m=a("social",["socialNetwork","socialAction","socialTarget","socialPagePath"],{page:"socialPagePath",hitCallback:"eventCallback"}),v=a("virtualPageView",["virtualPagePath","virtualPageTitle"],{page:"virtualPagePath",title:"virtualPageTitle",hitCallback:"eventCallback"});n(CA,{_dataLayer:CA.dataLayer||"dataLayer",dataLayer:function(){var e=this._dataLayer;return"object"==typeof e&&e.push?e:"string"==typeof e&&window[e]&&window[e].push?this._dataLayer=window[e]:[]},event:s("Event",h),social:s("Social",m),pageview:s("Pageview",v),push:function(e){this.dataLayer().push(e)},eventAutoFormat:function(e,t,n){var r=[e,t].join(":"),o=[e,this.contentType(),t].join(":");this.event(e,r,o,n)},trackElementView:function(e){var t=h(Array.prototype.slice.call(arguments,1));o(e,function(){u.push({el:this,data:n({},t)})}),g()},onElementView:function(e,t){o(e,function(){u.push({el:this,data:t})}),g()},disableScrollDepth:function(){d=[]},getVariable:function(e,t){for(var n=this.dataLayer(),r=n.length-1;r>=0;r--){var o=n[r][e];if(o)return o}return t},isMobile:function(){return t()<=600},contentDisplay:function(){return this.isMobile()?"mobile":"desktop"},contentType:function(){return this.getVariable("Content Type","other")},pageTitle:function(){return document.title.replace(/\s*(-|\|)\s*(Curbed|Eater|Polygon|Racked|SBNation|The Verge|Vox( Media)?)(.com)?$/,"")},crossDomains:function(){return"undefined"!=typeof __xdomains__?__xdomains__:document.domain.replace("www.","")},placement:function(e){for(var t=e;t&&t.getAttribute;){var n=t.getAttribute("data-analytics-placement");if(n)return":"+n;t=t.parentNode}return""},socialAction:function(e){for(var t=e;t&&t.getAttribute;){var n=t.getAttribute("data-analytics-action");if(n)return n;t=t.parentNode}return"share"},socialPlacement:function(e){for(var t=e;t&&t.getAttribute;){var n=t.getAttribute("data-analytics-placement");if(n)return n;t=t.parentNode}return"main"},headerText:function(e){var t=e,n=t.querySelectorAll("h1,h2,h3,h4,h5,h6");return n.length?(n=Array.prototype.slice.call(n),n.sort(function(e,t){return e.tagName.localeCompare(t.tagName)}),n[0].innerText):t.innerText},siblingText:function(e){for(var t=e,n=t.getAttribute("data-analytics-link").replace(/([^:]+).*/,"$1"),r='[data-analytics-link="'+n+'"]';(t=t.parentNode)&&t.querySelector;){var o=t.querySelector(r);if(o)return o.innerText}return e.getAttribute("href")},isOutboundLink:function(e,t){var n=e.hostname||"";if(!n||n==document.domain)return!1;for(var r=t.split(","),o=0;o<r.length;o++)if(n.indexOf(r[o])>=0)return!1;return!0}});var y=function(t){for(var n=window.pageYOffset||p&&p.scrollTop||document.body.scrollTop,r=document.body.scrollHeight,o=n/r*100,i=(n+e())/r*100,a=d.length-1;a>=0;a--){var s=d[a];if((s>o&&i>s||t&&i>s)&&(CA.eventAutoFormat("interaction",s,!0),d.splice(a,1),t))return}},g=r(function(){for(var e=u.length-1;e>=0;e--){var t=u[e].el;if(l(t)){var n=u[e].data;if(u.splice(e,1),"function"==typeof n)return n();n.eventCategory=n.eventCategory||t.getAttribute("data-analytics-category")||t.getAttribute("data-analytics-viewport")||"interaction",n.eventAction=n.eventAction||t.getAttribute("data-analytics-action")||n.eventCategory+":view",n.eventLabel=n.eventLabel||t.getAttribute("data-analytics-label")||t.innerText,n.eventNonInt=!0,CA.event(n)}}},300);f(function(){if(CA._q)for(;CA._q.length;){var e=CA._q.pop();CA[e[0]].apply(CA,e[1])}i(window,"scroll",r(function(){d.length&&y(),u.length&&g()},50)),CA.trackElementView("[data-analytics-viewport]"),y(!0)})}();var Util=Util||{};Util.getUrlVars=function(){for(var e,t={},n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),r=0;r<n.length;r++){var e=n[r].split("=");val=e[1],retVal="true"==val?!0:"false"==val?!1:null,null==retVal&&(retVal=0==isNaN(parseInt(val))?parseInt(val):0==isNaN(parseFloat(val))?parseFloat(val):val),t[e[0]]=retVal}return t},Util.inViewport=function(e){var t,n;return e&&1===e.nodeType?(n=document.documentElement,t=e.getBoundingClientRect(),!!t&&t.bottom>0&&t.right>0&&t.top<n.clientHeight&&t.left<n.clientWidth):!1},Util.detectCSSFeature=function(e){var t=["Webkit","Moz","ms","O"],n=document.createElement("div"),r=null,e=e.toLowerCase();if(n.style[e])return!0;r=e.charAt(0).toUpperCase()+e.substr(1);for(var o=t.length-1;o>-1;o--)if(void 0!==n.style[t[o]+r])return!0;return!1},Util.getReferrerDomain=function(){return document.referrer.split("/")[2]},Util.socialReferrer=function(){var e=Util.getUrlVars().debugReferrer,t=e||this.getReferrerDomain();if(t){if(t=t.replace(/^www\./i,""),["twitter.com","t.co"].indexOf(t)>-1)return"twitter";if(["facebook.com","fb.me"].indexOf(t)>-1)return"facebook";if("plus.google.com"===t)return"google-plus";if("sports.yahoo.com"===t)return"yahoo sports";if("yahoo.com"===t)return"yahoo"}return null},Util.isReferrerSocialDomain=function(e){var t=this.socialReferrer();if(e)return e===t;var n=["twitter","facebook","google-plus","yahoo","yahoo sports"],r=jQuery.inArray(t,n);return r>-1},Util.isReferrerCurrentDomain=function(){var e=this.getReferrerDomain(),t=location.href.split("/")[2];return e===t},Util.isReferrerCurrentNetwork=function(){var e=this.getReferrerDomain(),t=location.href;if(!e)return!1;var n=/eater|polygon|racked|sbnation|vox|voxmedia|voxcreative|theverge/;return t.match(n)+""==e.match(n)+""},Util.isReferrerVoxMediaNetwork=function(){var e=this.getReferrerDomain();if(!e)return!1;var t=/eater|polygon|racked|sbnation|vox|voxmedia|voxcreative|theverge/,n=e.match(t);return n&&n.length>0},Util.loadScriptAsync=function(e,t){var n=document.createElement("SCRIPT"),r=document.getElementsByTagName("SCRIPT")[0];n.type="text/javascript",n.async=!0,n.src=e,t&&(n.onload=t),r.parentNode.insertBefore(n,r)},Util.characterCountdown=function(e,t,n){var r=e.attr("maxlength");t.text(r-e.val().length);
var o=jQuery("<div class='error' style='display:none'>Some of your text was cut off because it exceeded the limit</div>");e.before(o),e.removeAttr("maxlength"),e.keyup(function(){var i=e.val().length;i>r?n||(e.val(e.val().substr(0,r)),o.show(),i=e.val().length):o.hide(),t.text(r-i)})},Util.addQueryParam=function(e,t,n){var r=new RegExp("([?|&])"+e+"=.*?(&|#|$)","gi");if(n.match(r))return t?n.replace(r,"$1"+e+"="+t+"$2"):n.replace(r,"$2");if(t){var o=-1!==n.indexOf("?")?"&":"?",i=n.split("#");return n=i[0]+o+e+"="+t,i[1]&&(n+="#"+i[1]),n}return n},Util.trackFacebook=function(e){return e?void(window.fbAsyncInit=function(){FB.init({version:"v2.6",appId:e,status:!0,cookie:!0,xfbml:!0});var t=Chorus.Analytics;FB.Event.subscribe("edge.create",function(e){t.event("social","facebook:like",e),t.social("facebook","like",e),e.match(/facebook\.com\/verge/i)&&t.event("follow-bar","facebook:like",e)}),FB.Event.subscribe("edge.remove",function(e){t.event("social","facebook:unlike",e),t.social("facebook","unlike",e),e.match(/facebook\.com\/verge/i)&&t.event("follow-bar","facebook:unlike",e)})}):console.log("[Util.trackFacebook]: Specify a Facebook App ID")},Util.trackTwitter=function(){window.twttr=window.twttr||(t={_e:[],ready:function(e){t._e.push(e)}});var e=Chorus.Analytics;twttr.ready(function(t){t.events.bind("tweet",function(t){e.event("social","twitter:tweet",location.href),e.social("twitter","tweet",location.href)}),t.events.bind("follow",function(t){e.event("social","twitter:follow","@"+t.data.screen_name),e.social("twitter","follow","@"+t.data.screen_name),jQuery(t.target).parent().hasClass("follow-the-verge")&&e.event("follow-bar","twitter:follow","@"+t.data.screen_name)}),t.events.bind("retweet",function(t){e.event("social","twitter:retweet",t.data.source_tweet_id),e.social("twitter","retweet",t.data.source_tweet_id)}),t.events.bind("favorite",function(t){e.event("social","twitter:favorite",t.data.tweet_id),e.social("twitter","favorite",t.data.tweet_id)})})},Util.stringToTitleCase=function(e){return e.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})};var Chorus=Chorus||{};Chorus.EventDispatcher=function(){function e(e){return _?_.clone(e):JSON.parse(JSON.stringify(jsonObject))}function t(e,t,n){e[t]||(e[t]=[]),e[t].push(n)}function n(n,r,o){var r=r||{},l=i[n];if(s&&console.log("Chorus.EventDispatcher is publishing the following event",n,r),o&&(s&&console.log("Chorus.EventDispatcher event "+n+" should be applied to all subsequent events",n,r),t(a,n,r)),i[n]){r.eventType=n;for(var d=0,u=l.length;u>d;d++)l[d](e(r))}}function r(e,n){t(i,e,n),s&&!l&&console.log("Chorus.EventDispatcher is subscribing to the following event",e),s&&l&&console.log("Chorus.EventDispatcher is subscribing to the following event",e,n);var r=a[e];if(r)for(var o=0,d=r.length;d>o;o++)s&&console.log("Chorus.EventDispatcher has found an event of the type "+e+" that should be applied to any subsequent subscriber",e,r[o]),n(r[o])}function o(e,t){if(i[e])for(var n=i[e],r=n.length-1;r>-1;r--)n[r]==t&&n.splice(r,1)}var i={},a={},s=1==Util.getUrlVars().debugEventDispatcher,l=1==Util.getUrlVars().debugVerbose;return{publish:function(e,t,r){var r=r||!1;n(e,t,r)},subscribe:function(e,t){r(e,t)},unsubscribe:function(e,t){o(e,t)},debug:function(e){s=!0,e===!0&&(l=!0)}}}(),jQuery(document).ready(function(e){var t=e(".m-ad-survey__form"),n=!0;setTimeout(function(){n&&t.addClass("show_survey").removeClass("hidden_survey")},1e3),Chorus.EventDispatcher.subscribe("first_ad_rendered",function(){n=!1,t.addClass("hidden_survey").removeClass("show_survey")})});var Util=Util||{};Util.UserAgentProfiler=function(){var e="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch||navigator.msMaxTouchPoints>0,t=window.innerWidth,n=window.navigator.userAgent,r=e&&728>t||window.location.href.indexOf("mobile=true")>0,o=e&&t>=728,i=!r&&!o,a=/(iPad|iPhone|iPod)/g.test(n),s=a&&/OS\s(7|6_1_4)/g.test(n),l=/Android/g.test(n),d=!1,u=r?"mobile":o?"tablet":"desktop";if(n.indexOf("Android")>0)for(var c=n.split(";"),p=0,f=c.length;f>p;p++)if(c[p].indexOf("Android")>0){var h=c[p].split(" ");if(parseInt(h[h.length-1].split(".")[0])<3){d=!0;break}}return{screenWidth:function(){return t},profile:function(){return u},isTablet:function(){return o},isMobile:function(){return r},isDesktop:function(){return i},isAndroid:function(){return l},isAndroidLt3:function(){return d},isIOS:function(){return a},isIOS7:function(){return s},deviceTypeForAds:function(){return this.profile()},browserWidthForAds:function(){return Chorus.Environment.currentBreakpoint().name},doNotTrack:function(){var e;if(void 0!==navigator.doNotTrack)e=navigator.doNotTrack;else if(void 0!==window.doNotTrack)e=window.doNotTrack;else{if(void 0===navigator.msDoNotTrack)return"unsupported";e=navigator.msDoNotTrack}return/1|yes|true/.test(e)?"1":"0"}}}();var SBN=SBN||{};SBN.Campaigns=SBN.Campaigns||{},SBN.Campaigns.log=function(e){"undefined"!=typeof console&&"function"==typeof console.log&&0!==jQuery("#ads_info_content").length&&console.log("[Ads]: "+e)},SBN.Campaigns.Components={clickUrls:{},activatedComponents:Array(),componentProperties:["campaign_id","component_name","component_id","component_type"],callbacks:{},config:{},renderedComponent:null,componentClickUrls:{},recordClickUrl:function(e,t){this.componentClickUrls[e]=t},click:function(e,t){url=this.componentClickUrls[e];var n;n="undefined"==typeof jQuery?Object.extend:jQuery.extend,t=n({newWindowName:null},t||{}),url&&(null!==t.newWindowName?window.open(url,t.newWindowName):window.location=url)},logActivation:function(e,t,n,r){this.activatedComponents.push({component_name:e,component_id:t,campaign_id:n,component_type:r})},activeComponentContext:function(){for(var e={},t=0;t<this.componentProperties.length;++t)for(var n=this.componentProperties[t],r=0;r<this.activatedComponents.length;++r){var o=this.activatedComponents[r],i=o[n];i&&(e[n]||(e[n]=[]),e[n].push(i))}return e},setCustomVarsFromActiveComponents:function(){var e=this.activeComponentContext();for(var t in e)SBN.Ads.addVariable(t,e[t])}},SBN.Campaigns.trackingImageProxy=function(){return{callbacks:[],images:[],loaded:!1,registerCallback:function(e){this.callbacks.push(e),this.createImages()},registerImage:function(e){this.images.push(e),this.createImages()},createImages:function(e){if(e||this.loaded){for(var t;t=this.images.pop();){var n=document.createElement("img");n.src=t.replace(/%%/g,""),n.height=1,n.width=1,document.body.appendChild(n)}for(var r;r=this.callbacks.pop();)r.call(window)}},load:function(){this.loaded=!0,this.createImages(!0)}}}(),"undefined"!=typeof jQuery&&jQuery(function(){SBN.Campaigns.trackingImageProxy.load()}),SBN.Campaigns.renderComponent=function(e){switch(e.type){case"clientReskin":case"headerReskin":SBN.Campaigns.renderReskin(e);break;default:SBN.Campaigns.log("Component type not recognized: "+e.type)}},SBN.Campaigns.renderReskin=function(reskin){var head=document.getElementsByTagName("head")[0],style=document.createElement("style"),rules=document.createTextNode(reskin.style);style.type="text/css",style.styleSheet?style.styleSheet.cssText=rules.nodeValue:style.appendChild(rules),reskin&&reskin.component&&reskin.component.componentId&&(style.id="stylesheet_component_"+reskin.component.componentId,jQuery("body").addClass("body_component_"+reskin.component.componentId),reskin.component.secondary_tracker_url&&SBN.Campaigns.trackingImageProxy.registerImage(reskin.component.secondary_tracker_url),SBN.Campaigns.Components.renderedComponent=reskin),head.appendChild(style),eval(reskin.js),SBN.Campaigns.Components.renderedComponent&&SBN.Campaigns.log("SBN.Campaigns.Components.renderedComponent is now: "+SBN.Campaigns.Components.renderedComponent.component.componentId)},SBN.Campaigns.renderAdServedReskin=function(e){jQuery(function(){jQuery.browser&&jQuery.browser.msie&&jQuery.browser.version<9||(SBN.Campaigns.renderComponent(e),Chorus&&Chorus.EventDispatcher&&Chorus.EventDispatcher.publish&&"undefined"!=typeof e.component.data.useLightLogo&&Chorus.EventDispatcher.publish("campaignReskinApplied",{useLightLogo:e.component.data.useLightLogo,useThirdLogo:e.component.data.useThirdLogo,useSolidBackground:e.component.data.useSolidBackground,useAlternateSocialIcons:e.component.data.useAlternateSocialIcons},!0))})},SBN.Campaigns.getComponentInfoList=function(){var e=jQuery("#ads_info_content");if(0===e.length)return null;var t=jQuery("#component-ads-info");return 0===t.length&&(e.append('<p class="toggler"><a onclick="SBN.Ads.toggleSection(this, \'#component-ads-info\')">+</a></p>').append("<h3>Results of Component Geotargeting</h3>").append('<p id="component-ads-geo-info" style="font-style:italic; font-size:11px; margin-top:-20px;">'),t=jQuery('<ul id="component-ads-info" style="display:none" />').appendTo(e)),t},SBN.Campaigns.updateComponentStatusInInfoPane=function(e,t){var n=SBN.Campaigns.getComponentInfoList();if(n){var r,o,i="";"string"==typeof e?r=e:(r=e.component.trackerId,e.component.data.geotargeted&&(i="(GEO)&nbsp;")),o=jQuery("#component-ads-info-"+r);var a={headerReskin:"Header Reskin",clientReskin:"Reskin",topHat:"Top Hat",fishtank:"Fishtank"};0===o.length&&(o=jQuery("<li />").attr("id","component-ads-info-"+e.component.trackerId).html(a[e.type]+" "+e.component.trackerId+"&nbsp;"+i).append('<span class="status" />').appendTo(n));var s=t?"("+t+")":"";o.find(".status").text(s),"Rendered"===t&&o.css("font-weight","bold")}},SBN.Campaigns.belowNavAdMarkup=null,SBN.Campaigns.renderBelowNavAdMarkupIfApplicable=function(){if("undefined"!==SBN.Campaigns.belowNavAdMarkup&&SBN.Campaigns.belowNavAdMarkup){var e=document.getElementById("leaderboard_ad");e&&(e.style.display="none"),"complete"!==document.readyState&&document.write($("<div/>").html(SBN.Campaigns.belowNavAdMarkup).text())}};var Chorus=Chorus||{};Chorus.Environment=function(e){function t(){var t=e.innerWidth;i=t>e.innerHeight?"landscape":"portrait";for(var r=n.length-1;r>-1;r--){var o=n[r];if(t>=o.min&&(void 0===o.max||t<=o.max))return void((null==a||a.index!=o.index)&&(a=JSON.parse(JSON.stringify(o))))}}var n=[{index:0,name:"xsmall",min:0,max:400},{index:1,name:"small",min:401,max:600},{index:2,name:"medium_small",min:601,max:728},{index:3,name:"medium",min:749,max:880},{index:4,name:"large_medium",min:881,max:950},{index:5,name:"large",min:956,max:1080},{index:6,name:"xlarge_large",min:1081,max:1200},{index:7,name:"xlarge",min:1201,max:1500},{index:8,name:"xxlarge",min:1501}],r=null,o="ontouchstart"in e||e.DocumentTouch&&document instanceof DocumentTouch||navigator.msMaxTouchPoints>0,i=null,a=null,s=function(){clearTimeout(r),r=setTimeout(function(){clearTimeout(r),t()},20)};return e.addEventListener("resize",s),e.addEventListener("orientationchange",s),{currentBreakpoint:function(){return null==a&&t(),a},touch:function(){return o},clickEvent:function(){return o&&e.navigator.msPointerEnabled?"MSPointerDown":"click"},orientation:function(){return i},setBreakpoints:function(e){"undefined"!=typeof e&&e.constructor===Array&&(n=e,t())}}}(window);var NativeAds=NativeAds||{};!function(e){NativeAds.Util={toPositionInteger:function(e,t){var n=parseInt(e,10);return isNaN(n)?t:n},insertBefore:function(t,n,r){var o=e(t).get(r);o?e(o).before(n):e(t).last().after(n)},appendStyle:function(t,n){e(t).append("<style>"+n+"</style>")},colorize:function(t,n,r){r=r||"color",e(t).css(r,n)},assignOddEven:function(t){e(t).each(function(t){t%2===0?(e(this).removeClass("odd"),e(this).addClass("even")):(e(this).addClass("odd"),e(this).removeClass("even"))})},nativeAdPlacement:function(t){var n=function(){return[].map.call(arguments,function(e){return'[data-native-ad-id="'+e+'"]'}).join(", ")},r=e(t._element).parents(n("container")),o=t.fields;r.find(n("container")).length>0&&r.find(n("container")).remove(),r.find(n("preamble_bg")).css({"background-color":o.brand_color}),r.find(n("preamble_text")).css({color:o.brand_color,"border-color":o.brand_color}),r.find("a").attr("href",t.clickThroughUrl),o.byline||(o.byline="Our Partner"),o.preamble?o.byline=o.preamble+" "+o.byline:o.byline="Powered by "+o.byline;var i={body_text:o.description||o.pull_quote||"",headline:o.title||"",byline:o.byline||"",pull_quote:o.pull_quote||"",eyebrow:o.eyebrow||"From Our Sponsor"};e.each(i,function(e,t){r.find(n(e)).text(t)}),o.description&&r.find(n("description")).text(o.description);var a=r.find(n("thumbnail"));a.hasClass("vox-lazy-load")||a.hasClass("c-dynamic-image")||(a=a.find(".vox-lazy-load").length?a.find(".vox-lazy-load"):a),a.removeClass("lazy-image","vox-lazy-load","lazy-loaded");var s=a[0].className,l={src:o.thumbnail,"data-original":o.thumbnail,alt:o.description,style:"background-image:url("+o.thumbnail+"); background-size: cover; background-repeat:no-repeat;","class":s};a.attr(l);var d=a.siblings("svg");d.length&&d.remove(),r.find(n("logo")).attr({src:o.logo,alt:o.description}),e(document).trigger("hymnal:nativeAdPlaced",t)},createVideoIframeFromEmbedCodeAndPlaceIn:function(t,n){var r=document.createElement("IFRAME");r.style.width="100%",r.style.height="100%",r.style.border="0";var o='<script>var e = document.getElementsByTagName("div");for(var i = 0; i < e.length; i++){e[i].style.width = "auto"; e[i].style.height="auto";}</script>',i="<html><head><style>body{margin:0;} .OoyalaVideoPlayer {width:100%; height:100%;}</style></head>"+t+o+"<body></body></html>";e(n).empty().append(r),r.contentWindow.document.open(),r.contentWindow.document.write(i),r.contentWindow.document.close()},waitForLazyContent:function(t,n){var r=!1,o=function(){!r&&e(t).length&&(r=!0,n())};o(),Chorus.EventDispatcher.subscribe("moduleInserted",o)},limitCharacterCount:function(e,t){var n=e.indexOf(" ",t);if(-1==n)return e;var r=e.substring(0,n),o=/[A-Za-z0-9]/;return o.test(r.slice(-1))&&(r+="\u2026"),r},declobberBackground:function(t){var n=e(t),r=n.css("background-image");n.attr("style",""),n.css("background-image",r)},makeSponsorClickable:function(t,n){n=n||".native-ad-sponsorship,.native-ad-byline",e(t._element).find(n).css("cursor","pointer").click(function(){window.location=t.clickThroughUrl})}}}(jQuery),function(e){var t={LatestTreatment:function(e){NativeAds.Util.colorize(".native-ad-latest .native-ad-sponsorship",e.fields.brand_color);var t=NativeAds.Util.toPositionInteger(e.fields.position,4);NativeAds.Util.insertBefore(".m-rock.most-read ul.m-rock__list li",e._element,t)},VideoTreatment:function(t){var n=e(t._element);n.hide(),NativeAds.Util.waitForLazyContent(".m-breaker-block-videos",function(){e(".m-breaker-block-videos .m-breaker-block__articles").append(n);var r=n.find(".native-ad-sponsorship");NativeAds.Util.colorize(r,t.fields.brand_color),r.detach(),n.prepend(r),n.show()})},MobileTreatment:function(e){NativeAds.Util.colorize(".native-ad-mobile .native-ad-sponsorship",e.fields.brand_color),NativeAds.Util.colorize(".native-ad-mobile .native-ad-title",e.fields.brand_color)},SponsoredLinkTreatment:function(t,n){var r,o,i,a,s,l,d,u,c=e(t._element);r=c.find("a.native-ad-title").attr("href"),o=e('<div class="native-ad-preamble">From Our Sponsor</div>'),i=e('<div class="m-hp-block__image" style="background-image: url('+t.fields.thumbnail+');"></div>'),a=e('<div class="m-hp-block__title"></div>'),s=e('<h2><a href="'+r+'">'+t.fields.title+"</a></h2>"),l=e('<span class="m-hp-block__byline">'+t.fields.byline+"</span>"),d=e('<a class="m-hp-block__link-overlay" href="'+r+'"></a>'),u=e('<img class="native-ad-logo" src="'+t.fields.logo+'" alt="'+t.fields.description+'" />'),c.empty(),a.append(o).append(s).append(l).append(u),i.append(a).append(d),c.append(i)}},n=function(e){if("Native Ad"===e.type){switch(e.design_template){case"Native Ad Latest":t.LatestTreatment(e);break;case"Native Ad Video":t.VideoTreatment(e);break;case"Native Ad Mobile":t.MobileTreatment(e);break;case"Native Ad Sponsored Link":t.SponsoredLinkTreatment(e,".native-ad-sponsored-link");break;case"Native Ad Content Link":NativeAds.Util.nativeAdPlacement(e)}NativeAds.Util.makeSponsorClickable(e)}};e(document).on("hymnal:render",function(e,t){n(t.ad)})}(jQuery),Chorus.FontObserver=Chorus.FontObserver||{},Chorus.FontObserver.fonts=[{name:"Balto",options:{weight:"400",style:"normal"}},{name:"Balto",options:{weight:"400",style:"italic"}},{name:"Balto",options:{style:"normal",weight:"500"}},{name:"Balto",options:{style:"italic",weight:"500"}},{name:"Balto",options:{style:"italic",weight:"600"}},{name:"Balto",options:{weight:"700",style:"normal"}},{name:"Harriet",options:{style:"italic"}},{name:"Harriet display",options:{style:"italic"}},{name:"HarrietDisplayBlack",options:{style:"italic"}}],/*! usertiming v0.1.6 */
!function(e){"use strict";"undefined"==typeof e&&(e={}),"undefined"==typeof e.performance&&(e.performance={}),e._perfRefForUserTimingPolyfill=e.performance,e.performance.userTimingJsNow=!1,e.performance.userTimingJsNowPrefixed=!1,e.performance.userTimingJsUserTiming=!1,e.performance.userTimingJsUserTimingPrefixed=!1,e.performance.userTimingJsPerformanceTimeline=!1,e.performance.userTimingJsPerformanceTimelinePrefixed=!1;var t,n,r=[],o=[],i=null;if("function"!=typeof e.performance.now){for(e.performance.userTimingJsNow=!0,o=["webkitNow","msNow","mozNow"],t=0;t<o.length;t++)if("function"==typeof e.performance[o[t]]){e.performance.now=e.performance[o[t]],e.performance.userTimingJsNowPrefixed=!0;break}var a=+new Date;e.performance.timing&&e.performance.timing.navigationStart&&(a=e.performance.timing.navigationStart),"function"!=typeof e.performance.now&&(e.performance.now=Date.now?function(){return Date.now()-a}:function(){return+new Date-a})}var s=function(){},l=function(){},d=[],u=!1,c=!1;if("function"!=typeof e.performance.getEntries||"function"!=typeof e.performance.mark){for("function"==typeof e.performance.getEntries&&"function"!=typeof e.performance.mark&&(c=!0),e.performance.userTimingJsPerformanceTimeline=!0,r=["webkit","moz"],o=["getEntries","getEntriesByName","getEntriesByType"],t=0;t<o.length;t++)for(n=0;n<r.length;n++)i=r[n]+o[t].substr(0,1).toUpperCase()+o[t].substr(1),"function"==typeof e.performance[i]&&(e.performance[o[t]]=e.performance[i],e.performance.userTimingJsPerformanceTimelinePrefixed=!0);s=function(e){d.push(e),"measure"===e.entryType&&(u=!0)};var p=function(){u&&(d.sort(function(e,t){return e.startTime-t.startTime}),u=!1)};if(l=function(e,n){for(t=0;t<d.length;)d[t].entryType!==e||"undefined"!=typeof n&&d[t].name!==n?t++:d.splice(t,1)},"function"!=typeof e.performance.getEntries||c){var f=e.performance.getEntries;e.performance.getEntries=function(){p();var t=d.slice(0);return c&&f&&(Array.prototype.push.apply(t,f.call(e.performance)),t.sort(function(e,t){return e.startTime-t.startTime})),t}}if("function"!=typeof e.performance.getEntriesByType||c){var h=e.performance.getEntriesByType;e.performance.getEntriesByType=function(n){if("undefined"==typeof n||"mark"!==n&&"measure"!==n)return c&&h?h.call(e.performance,n):[];"measure"===n&&p();var r=[];for(t=0;t<d.length;t++)d[t].entryType===n&&r.push(d[t]);return r}}if("function"!=typeof e.performance.getEntriesByName||c){var m=e.performance.getEntriesByName;e.performance.getEntriesByName=function(n,r){if(r&&"mark"!==r&&"measure"!==r)return c&&m?m.call(e.performance,n,r):[];"undefined"!=typeof r&&"measure"===r&&p();var o=[];for(t=0;t<d.length;t++)("undefined"==typeof r||d[t].entryType===r)&&d[t].name===n&&o.push(d[t]);return c&&m&&(Array.prototype.push.apply(o,m.call(e.performance,n,r)),o.sort(function(e,t){return e.startTime-t.startTime})),o}}}if("function"!=typeof e.performance.mark){for(e.performance.userTimingJsUserTiming=!0,r=["webkit","moz","ms"],o=["mark","measure","clearMarks","clearMeasures"],t=0;t<o.length;t++)for(n=0;n<r.length;n++)i=r[n]+o[t].substr(0,1).toUpperCase()+o[t].substr(1),"function"==typeof e.performance[i]&&(e.performance[o[t]]=e.performance[i],e.performance.userTimingJsUserTimingPrefixed=!0);var v={};"function"!=typeof e.performance.mark&&(e.performance.mark=function(t){var n=e.performance.now();if("undefined"==typeof t)throw new SyntaxError("Mark name must be specified");if(e.performance.timing&&t in e.performance.timing)throw new SyntaxError("Mark name is not allowed");v[t]||(v[t]=[]),v[t].push(n),s({entryType:"mark",name:t,startTime:n,duration:0})}),"function"!=typeof e.performance.clearMarks&&(e.performance.clearMarks=function(e){e?v[e]=[]:v={},l("mark",e)}),"function"!=typeof e.performance.measure&&(e.performance.measure=function(t,n,r){var o=e.performance.now();if("undefined"==typeof t)throw new SyntaxError("Measure must be specified");if(!n)return void s({entryType:"measure",name:t,startTime:0,duration:o});var i=0;if(e.performance.timing&&n in e.performance.timing){if("navigationStart"!==n&&0===e.performance.timing[n])throw new Error(n+" has a timing of 0");i=e.performance.timing[n]-e.performance.timing.navigationStart}else{if(!(n in v))throw new Error(n+" mark not found");i=v[n][v[n].length-1]}var a=o;if(r)if(a=0,e.performance.timing&&r in e.performance.timing){if("navigationStart"!==r&&0===e.performance.timing[r])throw new Error(r+" has a timing of 0");a=e.performance.timing[r]-e.performance.timing.navigationStart}else{if(!(r in v))throw new Error(r+" mark not found");a=v[r][v[r].length-1]}var l=a-i;s({entryType:"measure",name:t,startTime:i,duration:l})}),"function"!=typeof e.performance.clearMeasures&&(e.performance.clearMeasures=function(e){l("measure",e)})}"undefined"!=typeof define&&define.amd?define([],function(){return e.performance}):"undefined"!=typeof module&&"undefined"!=typeof module.exports&&(module.exports=e.performance)}("undefined"!=typeof window?window:void 0),/*!
 * IframeClient v0.0.5
 * Copyright 2015, Vox Media
 * Released under MIT license
 */
function(e,t){var n={debug:!1,create:function(n,r){return t(this,n,r,e)},isInIframe:function(){try{return e.parent&&e.self!==e.top}catch(t){return!0}},error:function(e){if(this.debug)throw e}};"object"==typeof module&&module.exports?module.exports=n:e.IframeClient=n}(window,function(e,t,n,r){function o(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}var i=o()+o()+"-"+o()+"-"+o()+"-"+o()+"-"+o()+o()+o(),a="@app",s=t||"xframe",l="@res",d=200,u=[],c={},p={},f=0,h=null,m=null;return{host:n||"*",get id(){return i},src:function(e){return"string"==typeof e&&(e=document.querySelector(e)),e&&e instanceof Element&&e.contentWindow&&(e=e.contentWindow),e&&"function"==typeof e.postMessage?e:null},post:function(t,n,r){if(t=this.src(t),!t||!n)return e.error("invalid post");var o="string"==typeof n?{message:n}:n;if(void 0!==r&&(o.value=r),o.message){o[a]=s;try{t.postMessage(JSON.stringify(o),this.host)}catch(i){e.error(i)}}},request:function(t,n,r,o,a){function s(){var e=!1;for(var t in c)if(c.hasOwnProperty(t)){var n=c[t];n.attempts++<n.timeout/d?(l.post(n.src,n.data),e=!0):l.end(t,new Error("request timeout"))}h=e?setTimeout(s,d):null}if(t=this.src(t),!t||!n)return e.error("invalid request");var l=this,u=i+"-"+("0000"+f++).slice(-4),p=c[u]={timeout:a||15e3,attempts:0,src:t,cb:o,data:{message:n,value:r,id:u}};return h?this.post(t,p.data):s(),u},end:function(e,t){var n=e.id||e,r=t&&t.abort;if(c.hasOwnProperty(n)){var o=c[n];delete c[n],r||"function"!=typeof o.cb||o.cb(t||null,e.value)}},on:function(e,t,n){return u.push({message:e,fn:t,ctx:n}),this},listen:function(){function e(e,t){for(var n,r=0;r<u.length;r++){var o=u[r];o.message===t.message&&(n=o.fn.call(o.ctx,e,t.value))}return n}if(!m){var t=this;m=function(n){var r,o="*"===t.host||String(n.origin).indexOf(t.host)>=0;if(o&&/^\{.*\}$/.test(n.data))try{r=JSON.parse(n.data)}catch(i){r=null}if(o&&r&&r[a]===s)if(r.id){var d=r.message===l;d&&c.hasOwnProperty(r.id)?t.end(r):d||p.hasOwnProperty(r.id)||(p[r.id]=!0,t.post(n.source,{message:l,value:e(n,r)||"success",id:r.id}))}else e(n,r)},r.addEventListener("message",m)}return this},stopListening:function(){return m&&(r.removeEventListener("message",m),m=null),this},dispose:function(){clearInterval(h),this.stopListening()}}}),function(e){function t(e){return new n(e)}function n(e){if(!r)throw"volume is not installed";this.el=r.src(e)}var r,o={production:"http://volume.vox-cdn.com",sandbox:"http://volume-staging.vox-cdn.com",development:"http://localhost:4000"};t.embedHost=o[Chorus.Context.environment],t.selectAllEmbeds=function(){return document.querySelectorAll('iframe[src^="'+this.embedHost+'/embed"]')},t.install=function(e){e&&(this.embedHost=e);var n,o=(this.selectAllEmbeds(),document.querySelectorAll(".volume-video"));for(r?r.host=this.embedHost:r=IframeClient.create("volume",this.embedHost).on("analytics",function(e,n){t.reportEvent(n)}).on("pauseOthers",function(e,n){t.postToAll("pause",null,e.source)}).on("host",function(e,t){return{url:location.href,origin:location.origin,title:document.title,api:!0}}).listen(),n=0;n<o.length;n+=1)this.embedVideo(o[n]);return this},t.uninstall=function(){r&&(r.dispose(),r=null)},t.reportEvent=function(e){Chorus.Analytics.event(e)},t.embedVideo=function(e){var t=e.getAttribute("data-volume-uuid");if(t){var n={placement:e.getAttribute("data-volume-placement"),tracking:e.getAttribute("data-analytics-placement"),player_type:e.getAttribute("data-volume-player-choice"),start_time:e.getAttribute("data-volume-start-time")},r=String(e.getAttribute("data-volume-autoplay"));("1"===r||"true"===r)&&(n.autoplay=!0);var o=Object.keys(n).filter(function(e){return void 0!==n[e]}).map(function(e){return e+"="+encodeURIComponent(n[e])});e.className=e.className.replace(/volume-video|p-scalable-video/g,"")+" p-scalable-video",e.innerHTML='<iframe src="'+this.embedHost+"/embed/"+t+"?"+o.join("&")+'" frameborder="0" allowfullscreen></iframe>'}},t.postToAll=function(e,t,n){for(var o=this.selectAllEmbeds(),i=0;i<o.length;i++){var a=r.src(o[i]);a!==n&&r.post(a,e,t)}},n.prototype={play:function(e){var t="play";return e&&e.request?this.request(t):this.post(t)},pause:function(e){var t="pause";return e&&e.request?this.request(t):this.post(t)},post:function(e,t){return r&&r.post(this.el,e,t),this},request:function(e,t,n){return r&&r.request(this.el,e,t,n),this}},jQuery(document).ready(function(){e.volume=t.install()})}(this);var Volume=Volume||{};Volume.Config=function(e){function t(e){if(0!==Object.keys(e).length){l=e.configs;var t=Util.UserAgentProfiler;if(t.isMobile())var n="mobile";else if(t.isTablet())var n="tablet";else var n="desktop";var r=e.device[n];r&&(s=r)}}function n(e){return"undefined"!=typeof s&&s.hasOwnProperty(e)?s[e]:void 0}function r(e){var t=n(e);if("undefined"!=typeof t)return t.preferred}function o(e,t){var r=n(e);if("undefined"!=typeof r){var o=t||r.preferred,i=r[o];return i?l[i]:void 0}}function i(e){"function"==typeof e?d=e:"undefined"==typeof e&&d()}function a(e){"undefined"!=typeof e&&(t(e),Volume.Config.ready())}var s,l,d=function(){};return{init:a,ready:i,placementConfig:o,preferredPlacementPlayer:r}}(jQuery),jQuery(function(){Volume.Config.init(window.volume_profile)});var Volume=Volume||{};Volume.Player=function(e){function t(){var t=e(r);t.each(function(t,r){var o=e(r),i=o.attr("id");"undefined"==typeof o.data("volume-uuid")&&n(i)})}function n(t){var n=e("#"+t),r=n.data("volume-id"),o=(n.data("volume-placement"),n.data());"undefined"!=typeof o&&(o.autoplay=o.volumeAutoplay),"undefined"!=typeof t&&"undefined"!=typeof r&&Chorus&&Chorus.VideoContext&&Chorus.VideoContext.createVolumePlayer(t,r,o)}var r=".volume-video:not(.prevent-init)";return{init:t,create:n}}(jQuery),Volume.Config.ready(function(){Volume.Player.init()});var Chorus=Chorus||{};!function(e){function t(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];i[n]=function(){return console.log('[VideoContext]: The "'+n+'" method is deprecated. Please use "'+e+'" instead.'),i[e].apply(i,arguments)}}}function n(){function e(e){return function(){for(var t in i.players)"function"==typeof i.players[t][e]&&i.players[t][e]()}}n.init||(n.init=!0,jQuery(document).on("pause",e("suspend")).on("resume",e("resume")).find("head").append('<script src="https://resources.amazonwebapps.com/v1/latest/Amazon-Web-App-API.min.js" async></script>'))}var r="viewedVideos",o=1e5,i=Chorus.VideoContext={videos:{},players:{},getVideo:function(e){return this.videos[e]||null},getVideoById:function(e){for(var t in this.videos)if(this.videos[t].id===e)return this.videos[t]},addPlacementForId:function(t,n){var r=this.getVideoById(t);r&&(r=e.extend({},r),r.placement=n,this.addVideo(r))},addVideo:function(e){e instanceof Array==0&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];n.preview_urls=n.preview_urls||{},n.provider_video_data=n.provider_video_data||{},n.provider_video_id=n.provider_video_id||"",n.placement=n.placement||null,n.type=n.provider_video_type=n.provider_video_type||"other",n.title=n.title||"No Title",delete n.hasViewport,this.videos[n.placement||n.id]=n}return this},addVolumeVideo:function(e){e instanceof Array==0&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];this.videos[n.id]=n}return this},createVolumePlayer:function(t,r,o){var i=this.getVideo(r);if(i){for(var a=e("#"+t),s=a.data("volume-placement"),l=o.volumePlayerChoice,d=Volume.Config.preferredPlacementPlayer(s),u=["ooyala","youtube","brightcove"],c=l||d,p=i[c+"_id"],f=0;null==p&&f<u.length;f++)c=u[f],p=i[c+"_id"];if(null!=p){var o=e.extend(Volume.Config.placementConfig(s,c),o),h={ooyala:OoyalaWrapper,youtube:YoutubeWrapper,brightcove:BrightcoveWrapper,embed:EmbedWrapper}[c];if(h){var m,v=a.attr("id");h!==BrightcoveWrapper&&(v=a.attr("id")+"-target",m='<div id="'+v+'"></div>'),this.destroyPlacement(v),a.addClass("p-scalable-video"),a.append(m),this.players[r]=new h(v,i,o),this.createViewport(v,r,o)}n()}}},addOoyalaVideo:function(e,t,n){var r={id:"ooyala"+Object.keys(this.videos).length,provider_video_id:e,provider_video_type:"ooyala",placement:n,title:t};return this.addVideo(r),r.id},destroyPlayer:function(e){var t=this.players[e];t&&"function"==typeof t.destroy&&t.destroy(),delete this.players[e]},destroyAllPlayers:function(){for(var e in this.players)this.destroyPlayer(e)},destroyPlacement:function(e){for(var t in this.players){var n=this.players[t];if(n.elementId===e)return this.destroyPlayer(t)}},createPlayer:function(e,t,r){r=r||{};var o=this.getVideo(t);if(o){var i={brightcove:BrightcoveWrapper,ooyala:OoyalaWrapper,youtube:YoutubeWrapper,embed:EmbedWrapper}[o.type];i&&(this.destroyPlacement(e),this.players[t]=new i(e,o,r),this.createViewport(e,t,r)),n()}},createViewport:function(t,n,r){if(r=r||{},!r.disableViewport){var o=this.getVideo(n),i=this;if(o&&!o.hasViewport){o.hasViewport=!0,"string"==typeof t&&(t=e("#"+t));var a=this.formatVideoEvent("view",o,t,function(){"ooyala"===o.type&&i.addViewedVideo(o)});Chorus.Analytics.trackElementView(t,a)}}},createViewportProxy:function(t,n,r){var o="data-analytics-placement",i=e(n).attr(o,e(t).attr(o));return this.createViewport(i,r)},createViewportGroup:function(t,n,r){"function"==typeof n&&(r=n,n=null),n=n||"data-placement",e(t).each(function(){var t=e(this);Chorus.Analytics.onElementView(t,function(){var e=t.find("["+n+"]").map(function(){return this.getAttribute(n)});i.trackPlacementsInViewport(e),"function"==typeof r&&r()})})},trackPlacementsInViewport:function(e){for(var t=0;t<e.length;t++){var n=this.getVideo(e[t]);n&&!n.hasViewport&&(n.hasViewport=!0,Chorus.Analytics.event(this.formatVideoEvent("view",n)))}},formatVideoEvent:function(t,n,r,o){var i=n.placement;!i&&r&&(i="data-analytics-placement",r=e("string"==typeof r?"#"+r:r),i=r.closest("["+i+"]").attr(i));var a="embed"===n.type,s=a?n.provider_video_id.replace(/.*embed\/([^"']+).*/,"$1"):n.id;return{eventCategory:a?"videotemp":"video",eventAction:[n.type||"volume",t,i||"other"].join(":"),eventLabel:[n.title,s].join(" | "),nonInteraction:"view"===t,eventCallback:o}},getViewedVideos:function(){return Chorus.Modernizr.localstorage?JSON.parse(localStorage.getItem(r)||"[]"):[]},addViewedVideo:function(e){var t=this.getViewedVideos();t.unshift(e),Chorus.Modernizr.localstorage&&localStorage.setItem(r,JSON.stringify(t.slice(0,6)))},findUnviewedVideo:function(e,t){var n=this.getViewedVideos(),r={};n.push(t||{}),n.forEach(function(e){e.id&&(r[e.id]=1),e.provider_video_id&&(r[e.provider_video_id]=1)});for(var o=0;o<e.length;o++){var i=e[o];if(!r[i.id]&&!r[i.provider_video_id])return i}return e[0]}};t("addVideo","addVideos","addChorusVideos"),t("addOoyalaVideo","addCustomVideo","addVideoFromOoyalaIdWithTitle"),i.Wrapper={$el:null,elementId:"",meta:{},options:{},player:null,played:!1,destroy:function(){},suspend:function(){},resume:function(){},pub:function(e,t){var n=Chorus.EventDispatcher;n&&n.publish(e,t||{player:this.player})},perfMark:function(){var e=window.performance;e&&e.mark&&e.mark.apply(e,arguments)},perfMeasure:function(e){var t=window.performance;if(t&&t.measure){t.measure.apply(t,arguments);var n=t.getEntriesByName(e),r=n[n.length-1],i=Math.floor(r.duration);if(i>o)return;var a=[this.meta.type,e].join(":"),s=[this.meta.title,this.meta.id].join(" | ");Chorus.Analytics.event("video",a,s,i,!0)}},perfLoadStart:function(){"undefined"==typeof BOOMR||this._timer||(this._timer=BOOMR.requestStart("tag"))},perfLoadComplete:function(){this._timer&&(this._timer.loaded(),delete this._timer)},markAsViewed:function(e){(!e||this.options.setPlayedVideos)&&i.addViewedVideo(this.meta)},formatEvent:function(e,t){return i.formatVideoEvent(e,this.meta,this.$el,t)}}}(jQuery),BrightcoveWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{THUMB_FALLBACK:"http://assets.volume.voxmedia.com/static-images/default-thumb.jpg",insertVideoTag:function(e){var t=this.getVideoClass(),n='<video class="video-js '+t+'"';n+=' id="brightcove_'+this.meta.id+'"',n+=' data-player="'+this.options.player_id+'"',n+=' data-account="'+this.options.account_id+'"',n+=' data-embed="default"',n+="></video>",jQuery(n).appendTo(e)},getVideoClass:function(){var e=[Chorus.Context.network_slug];return"true"===this.options.hideAdOverlay&&e.push("hide-ad-overlay"),"true"===this.options.hideAdCountdown&&e.push("hide-ad-countdown"),e.join(" ")},setupPlayer:function(e){var t=this;videojs("brightcove_"+t.meta.id).ready(function(){var n=this,r=t.getEmbedCode(),o=function(){this.currentTime()>0&&(this.off("timeupdate",o),t.perfMark("playbackStart"),t.perfMeasure("ttff","playbackRequest","playbackStart"))};t.player=n,t.options.onCreate(),"true"==t.options.enableSocialSharing&&"function"==typeof this.social&&n.social({title:t.meta.title,displayAfterVideo:!0,description:t.meta.description,services:{facebook:!0,twitter:!0,pinterest:!1,tumblr:!1,linkedin:!1,google:!1}}),n.preload("metadata"),e.autoplay?n.autoplay(!0):null!=t.meta.brightcove_thumbnail?n.poster(t.meta.brightcove_thumbnail):n.poster(t.THUMB_FALLBACK),this.one("loadedmetadata",function(e){t.perfMark("brightcoveReady"),t.perfMeasure("loadtime","brightcoveInitializeStart","brightcoveReady")}),this.one("firstplay",function(e){t.perfMark("playbackRequest"),t.options.onPlay(),Chorus.Analytics.event(t.formatEvent("play")),this.on("timeupdate",o)}),this.one("error",function(e){console.log("Brightcove: error"),console.log(e),Chorus.Analytics.event(t.formatEvent("error"))}),r.indexOf("onceux.unicornmedia.com")>=0?n.onceux({metadataUri:r,contentHeaders:!0}):n.src({src:r})})},getEmbedCode:function(){var e=this.options,t=this.meta;if(null!==e.applicationId&&null!==e.deliveryType&&null!==e.fileType&&null!==e.extension){var n="0c2129c5-42b8-49e0-aa4c-f560c7bc0ba7",r="",o=["http://onceux.unicornmedia.com/now/ads/vmap",e.deliveryType,e.fileType,n,e.applicationId,t.brightcove_uuid,"content."+e.extension].join("/");return null!==t.brightcove_query_params&&null!==e.umoprofiles?r=t.brightcove_query_params+"&umoprofiles="+e.umoprofiles:null!==e.umoprofiles?r="?umoprofiles="+e.umoprofiles:null!==t.brightcove_query_params&&(r=t.brightcove_query_params),o+r}return t.brightcove_id},destroy:function(){this.player&&this.player.dispose()},getPlayerUrl:function(e){var t=["//players.brightcove.net",e.account_id,e.player_id+"_default","index.min.js"];return t.join("/")}}),OoyalaWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{destroy:function(){this.player&&this.player.destroy()},suspend:function(){this.player&&(this.suspendState=this.player.getState(),this.player.pause())},resume:function(){var e=this.suspendState;!this.player||"playing"!==e&&"buffering"!==e||(this.player.play(),this.suspendState=null)},getOoyalaParams:function(e){for(var t=["//player.ooyala.com/v3/",e.player_id,"?"],n=["namespace","platform","version","tweaks"],r=0;r<n.length;r++){var o=n[r];e.hasOwnProperty(o)&&t.push(o,"=",e[o],"&")}return t.join("")}}),YoutubeWrapper.initQueue=[],YoutubeWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{destroy:function(){this.player&&this.player.destroy()},suspend:function(){this.player&&(this.suspendState=this.player.getPlayerState(),this.player.stopVideo())},resume:function(){var e=this.suspendState;!this.player||e!==YT.PlayerState.PLAYING&&e!==YT.PlayerState.BUFFERING||(this.player.playVideo(),this.suspendState=null)}}),EmbedWrapper.prototype=jQuery.extend({},Chorus.VideoContext.Wrapper,{destroy:function(){this.$el.empty()}});var Chorus=Chorus||{};Chorus.Video=Chorus.Video||{},Chorus.Video.youtubeApiLoaded=!1,Chorus.Video.loadYoutubeApi=function(){jQuery.getScript("//www.youtube.com/iframe_api"),Chorus.Video.youtubeApiLoaded=!0},Chorus.Video.wrapVideoIframe=function(){var e=jQuery,t=e(this),n="",r=t.attr("src");if(!t.parent().hasClass("chorus-video-embed")&&!t.parent().attr("data-volume-uuid")){if(!r||!/youtube|livestream|vimeo|vine|hulu|dailymotion|instagram/.test(r))return!0;/hulu\.com/.test(r)?(t.attr("width","100%"),t.attr("height","100%")):/instagram\.com/.test(r)?n=" instagram":/vine\.co/.test(r)&&(n=" vine"),t.attr("src",r),t.wrap('<div class="video-wrap'+n+'"></div>')}},Chorus.Video.fixLegacyOoyalaPlayer=function(){var e=jQuery;e("div[id*=ooyalaPlayer]").each(function(){e(this).css({height:"100%",width:"100%"})})},Chorus.Video.playInViewport=function(e){var t=500,n=[],r=[];e.each(function(){this.pause(),n.push(this)});var o=function(){for(var e,i=[];e=n.pop();)Util.inViewport(e)?(e.play(),r.push(e)):i.push(e);for(n=i,i=[];e=r.pop();)Util.inViewport(e)?i.push(e):(e.pause(),n.push(e));r=i,setTimeout(o,t)};o()},Chorus.Video.autoplay=!1,Chorus.Video.checkForAutoplay=function(){return window.history.length<=1?!1:Chorus.Video.autoplay?!0:Util.isReferrerCurrentDomain()&&jQuery("body").hasClass("video-entry")&&Util.UserAgentProfiler.isDesktop()},Chorus.Video.init=function(e){e=e||{};var t=jQuery,n=e.callback;e=t.extend({checkForExistingPlayer:!1},e),Chorus.Video.fixLegacyOoyalaPlayer(),t(".chorus-video-embed").each(function(r,o){if(!e.checkForExistingPlayer||!t(o).hasClass("chorus-video-player-loaded")){var i=t.extend({},e,{autoplay:0===r?Chorus.Video.checkForAutoplay():!1,callback:function(e){Chorus.VideoContext.ooyalaPlayer=e,t(o).addClass("chorus-video-player-loaded"),Chorus.EventDispatcher.publish("ooyalaPlayerLoaded",{ooyalaPlayer:e}),"function"==typeof n&&n.call(o,e)}});Chorus.VideoContext.createPlayer(o.id,t(o).data("chorus-video-id"),i)}})},window.jQuery&&jQuery(function(){Chorus.Video.init()});