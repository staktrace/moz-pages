"use strict";StackExchange.anonymous={};var gauth=function(){return{informStackAuth:function(g){if(!gauth.enabled()){return}var e=document.domain;if(e.substr(0,5)=="meta."){e=e.substr(4,e.length-4)}var d=$.cookie("gauth");if(d==null){$.cookie("gauth",null,{path:"/",domain:e});$.cookie("gauth",null,{path:"/",domain:document.domain});return}if(e.charAt(0)!="."){e="."+e}$.cookie("gauth",null,{path:"/",domain:e});$.cookie("gauth",null,{path:"/",domain:document.domain});var c=d.indexOf(":");var a=d.substr(0,c);var f=d.substr(c+1);var b=g+"/auth/global/write?authToken="+encodeURIComponent(a)+"&nonce="+encodeURIComponent(f);$(document).ready(function(){$("#footer").append("<iframe style='display:none' src='"+b+"'></iframe>")})},checkStackAuth:function(b){if(!gauth.enabled()){return}var a=$.cookie("gauthed");if(a!=null){return}$.cookie("gauthed","1",{path:"/"});var c=function(d){var f=d.origin;if(f!=b){return}if(d.data=="No Local Storage"){gauth.noGAuthStorage();return}if(d.data=="No Session"){gauth.noGAuthSession();return}var g=d.data.substr(0,d.data.indexOf(","));var h=d.data.substr(d.data.indexOf(",")+1);$.post("/users/login/global",{authToken:g,nonce:h},function(j,e,i){gauth.globallyAuthed(j)},"json")};if(window.attachEvent){window.attachEvent("onmessage",c)}else{window.addEventListener("message",c,false)}$.post("/users/login/global/request","",function(d,f,e){var g=b+"/auth/global/read?request="+encodeURIComponent(d.token)+"&nonce="+encodeURIComponent(d.nonce);$(document).ready(function(){$("#footer").append("<iframe id='global-auth-frame' style='display:none' src='"+g+"'></iframe>")})},"json")},enabled:function(){$.cookie("enabledCheck","1");if($.cookie("enabledCheck")==null){return false}$.cookie("enabledCheck",null);if(typeof(localStorage)=="undefined"){return false}return true},noGAuthStorage:function(){},noGAuthSession:function(){},globallyAuthed:function(b){if(!b||!b.Message){return}var c=b.Message+" ",d,a=false,e=""+window.location,g=e.indexOf("returnurl=");if(g!=-1){var f=e.indexOf("&",g);if(f==-1){f=e.length}d=decodeURIComponent(e.substring(g+"returnurl=".length,f));if(!/^(?:http:\/\/|\/)/.test(d)){d=null}else{d=d.replace(/[^-a-z0-9+&@#\/%?=~_|!:,.;()]/g,"")}}if(e.indexOf("/users/login")!=-1){a=true;d=d||"/"}if(a){c+="<br>You are being redirected..."}else{c+=d?"<a href=\"javascript:window.location='"+d+"'\">Click here</a> to return to your last location.":'<a href="javascript:location.reload(true)">Click here</a> to refresh the page.'}StackExchange.helpers.showFancyOverlay({message:c,showClose:!a,complete:function(){if(a){window.location=d}}})}}}();var genuwine=function(){var a;var l="";var m;var i=function(){return $(".genu").hasClass("genu-on")};var j=function(){var w=$(".genu");var y=$("#seWrapper");if(y.length==0){u();y=$("#seWrapper");var z;if(m>0){z=$("#seTabInbox");s(z)}else{z=$("#seTabHot");r(z)}z.addClass("seCurrent")}var x=w.hasClass("genu-on");if(x){$(".unreadCountTab").hide();$(".itemBoxNew").removeClass("itemBoxNew");y.fadeOut("fast")}else{y.fadeIn("fast");$(".unreadCount").hide()}w.toggleClass("genu-on",!x);if(m==-1){$(w).ready(function(){$("#seTabInbox").hide()})}};var u=function(){var y='<div id="seWrapper" style="position:absolute; display:none;"><div class="seIntro"><a href="'+l+'">Stack Exchange</a> is a network of free, community-driven Q&A sites.</div><div class="seNav"><ul class="seNavLinks"><li><a id="seTabHot">Hot Questions</a></li><li><a id="seTabSites">All Sites</a></li><li><a id="seTabInbox">Inbox</a></li></ul></div><div class="seContainer"></div><div class="seFooter">';if(StackExchange.options.enableAccountEmails){y+='<div id="seTabEmail" class="seEmailAccount"><a>email settings</a></div>'}y+='<a id="seClose">close</a></div></div>';var w=$("#hlinks");var x=w.height()+w.offset().top+5;$(y).appendTo("#portalLink").css({top:x}).find("ul.seNavLinks a, #seTabEmail").click(function(){f($(this))});$("#seClose").live("click",j)};var f=function(w){$(".seNavLinks a").removeClass("seCurrent");w.addClass("seCurrent");switch(w.attr("id")){case"seTabHot":r(w);$("#seContainerSites, #seContainerInbox, #seContainerEmail").hide();$("#seContainerHot").fadeIn("fast");break;case"seTabSites":g(w);$("#seContainerHot, #seContainerInbox, #seContainerEmail").hide();$("#seContainerSites").fadeIn("fast");break;case"seTabInbox":s(w);$("#seContainerHot, #seContainerSites, #seContainerEmail").hide();$("#seContainerInbox").fadeIn("fast");break;case"seTabEmail":k(w);$("#seContainerHot, #seContainerSites, #seContainerInbox").hide();$("#seContainerEmail").fadeIn("fast");break}};var r=function(w){if($("#seContainerHot").length==0){d(w)}};var k=function(w){if($("#seContainerEmail").length==0){c(w)}};var c=function(w){v(w,"/accounts/email-settings","json",function(z,A){var y='<div id="seContainerEmail" style="display:none; font-size:11px;"><div class="itemBox" style="border-bottom: 0px"><p>Would you like to receive unread inbox notifications via email?</p><div>Email: <input id="email-notify" name="email-notify" style="width:300px;" value="'+A.verifiedEmail+'"></input></div><div><input type="radio" name="optIn" value="true" id="email-enable"'+(A.optIn==true?'checked="checked"':"")+'"> <label for="email-enable">Email me my unread inbox messages </label> <select id="email-freq"><option value="3">every 3 hours</option><option value="24">daily</option><option value="168">weekly</option></select> </div><div><input type="radio" name="optIn" value="false" id="email-disable"'+(A.optIn!=true?'checked="checked"':"")+'"> <label for="email-disable">Do not email me inbox messages</label></input></div><div><input type="button" name="save" id="email-save" value="Save" disabled="disabled"></input></div><div id="email-confirmation" style="display:none;"></div></div></div>';q(z,y);$("#email-freq").val(A.freq).on("click focus",function(){$("#email-enable").prop("checked",true)});$("#email-notify").focus().keyup(x);$("#email-enable, #email-disable, #email-freq").change(x);function x(){$("#email-save").removeAttr("disabled");$("#email-confirmation").html("")}$("#email-save").click(function(){o();$.post("/accounts/verified-email-set",{email:$("#email-notify").val(),fkey:StackExchange.options.user.fkey,optin:$("input[name=optIn]:checked").val(),freq:$("#email-freq").val()},function(B){StackExchange.helpers.removeSpinner();$("#email-confirmation").html(B.message).fadeIn();if(B.success){$("#email-save").attr("disabled","disabled")}},"json")})},true)};var d=function(w){v(w,l+"/genuwine?callback=?","jsonp",e)};var e=function(y,E){var B=$("<div/>");var A='<div id="seContainerHot" style="display:none">';for(var D=0;D<E.length;D++){var z=E[D];var C=z.SiteId;var x='href="http://'+C+"/q/"+z.Id+'?hq=1"';var w=parseInt(z.DisplayScore,10);A+='<div class="itemBox"><a '+x+' class="seNumAnswer">'+w+'</a><div class="siteInfo"><p><a '+x+">"+B.text(z.Title).html()+'</a></p><a href="http://'+C+'" class="siteLink">'+C+"</a></div></div>"}A+="</div>";q(y,A)};var g=function(w){if($("#seContainerSites").length==0){t(w)}};var t=function(w){var x=document.location.host;v(w,l+"/genuwine/sites?callback=?&host="+x+(!!a?("&accountId="+a):""),"jsonp",b)};var b=function(y,x){var z='<div id="seContainerSites" style="display:none">';for(var B=0;B<x.length;B++){var C=x[B];var A=C.Name;var w='href="http://'+C.Id+'?as=1"';z+='<div class="itemBox"><a '+w+' class="siteFavicon"><img src="'+C.FaviconUrl+'" alt="'+A+'"></a><div class="siteInfo"><p><a '+w+">"+A+"</a></p><a "+w+' class="siteLink">'+C.Description+"</a></div></div>"}z+="</div>";q(y,z)};var s=function(w){if(m==-1){return}if($("#seContainerInbox").length==0){h(w)}if(m>0&&w.find(".unreadCountTab").length==0){w.prepend('<span class="unreadCountTab">'+m+"</span>")}};var h=function(w){v(w,"/inbox/genuwine","json",n,true)};var n=function(A,F){var B='<div id="seContainerInbox" style="display:none">';for(var E=0;E<F.length;E++){var z=F[E];var w='href="'+z.Url+'"';var D='title="'+z.CreationDate+'"';var y=z.Count;var G=z.IsNew?" itemBoxNew":"";B+='<div class="itemBox'+G+'"><a '+w+' class="siteLinkFavicon"><img src="'+z.FaviconUrl+'" alt="'+z.SiteUrl+'"></a><div class="siteInfo">';if(z.Type=="careers message"){B+="<p><a "+w+' style="font-weight:normal"><b>'+z.Title+"</b> wants to contact you on <b>Stack Overflow Careers</b></a></p>"}else{if(z.Type=="invitation"){var x=z.Count;var C="invitation"+(x>1?"s":"");B+="<p><a "+w+' style="font-weight:normal"><b>'+x+"</b> "+C+" awarded on <b>Stack Overflow Careers</b></a></p>"}else{B+="<p>"+(y>1?y+" ":"")+z.Type+" on <a "+w+" "+D+">"+z.Title+"</a></p>"}}B+='<p class="inboxSummary">'+(z.Summary||"")+"</p></div></div>"}if(!!a&&F.length>=5){B+='<div class="itemMoreContainer"><div class="seIntro"><a href="http://stackexchange.com/users/'+a+'?tab=inbox">more inbox messages &hellip;</a></div></div>'}B+="</div>";q(A,B)};var p={};var v=function(B,A,w,y,C){var z=B.attr("id");if(p[z]){o();return}p[z]=true;o();var x=function(){p[z]=false;StackExchange.helpers.showErrorPopup($(".seContainer"),"An error occurred while loading - please try again.")};$.ajax({type:"GET",url:A,dataType:w,success:function(D){if(D&&(D.length>0||C)){y(B,D)}else{x()}},error:x,complete:StackExchange.helpers.removeSpinner()})};var q=function(x,y){var w=$(y);w.appendTo(".seContainer");if(x.hasClass("seCurrent")){w.fadeIn("fast")}};var o=function(){StackExchange.helpers.removeSpinner();StackExchange.helpers.addSpinner(".seContainer",{position:"relative",left:"10px",top:"10px"})};return{isVisible:i,click:j,init:function(y,x){var w=$(".genu");if(w.length>=1){w[0].onclick=null}a=y;l=w.attr("href");m=x;w.removeAttr("href").add(".unreadCount").click(j);$(document).click(function(z){if(i()&&!$.contains($("#portalLink")[0],z.target)){j()}})}}}();StackExchange.notify=(function(){var n=0;var l=-1;var j="m";function m(o,q){var p=$("#dismissed-messages");p.val(p.val()+"~"+o+(q?" "+q:"")+"~")}function b(o,q){var p=$("#dismissed-messages").val();if(!p){return false}return new RegExp("~"+o+(q?" "+q:"")+"~").test(p)}function d(s,p,o){var q=parseInt($("body").css("margin-top").match(/\d+/));var r=p*q/s;if(o){$("body:not(.no-message-slide)").animate({marginTop:r+"px"},"fast","linear")}else{$("body:not(.no-message-slide)").css("marginTop",r+"px")}}var f=function(o,q){var p=$("#notify-"+o+(q?"-"+q:""));if(o==l){e()}else{if(o>l){$.post("/messages/mark-as-read",{messagetypeid:o,id:(q?q:null)})}}m(o,q);n--;p.fadeOut("fast",function(){d(n+1,n,true);p.remove()})};var a=function(q){n++;if(b(q.messageTypeId,q.id)){return false}var r="";if(q.messageTypeId){r=' id="notify-'+q.messageTypeId+(q.id?"-"+q.id:"")+'"'}var s="<div"+r+' style="display:none"><span class="notify-close"><a title="dismiss this notification">&times;</a></span><span class="notify-text">'+q.text+"</span>";if(q.showProfile){var o=encodeURIComponent("/users/"+q.userId+"?tab=activity");s+=' See your <a href="/messages/mark-as-read?messagetypeid='+q.messageTypeId+"&returnurl="+o+'">profile</a>.'}s+="</div>";var p=$(s);p.find(".notify-close").click(function(){if(q.close){q.close()}f(q.messageTypeId,q.id)});$("#notify-container").append(p);return true};var e=function(o){$.cookie(j,(o?o:"0"),{expires:90,path:"/"})};var i=function(){var o=parseInt($.cookie(j));if(isNaN(o)){o=0}if(o<5){g();e(++o)}};var k=function(){$("#notify-container div").fadeIn("slow")};var c=function(){$("body:not(.no-message-slide)").animate({marginTop:"2.5em"},"fast","linear")};var g=function(){$(".module.newuser:not(.sidebar-help)").show()};var h=function(q,o){var p=$('<div class="link-more"><a>view '+q+" more notification"+(q!=1?"s":"")+"</a></div>");$("#notify-container").append(p);p.click(function(){p.detach();for(var r=0;r<o.length;r++){a(o[r])}k()})};return{showFirstTime:function(o){if($.cookie(j)){i()}else{g();if(!/\/users\/(login|authenticate)/i.test(window.location)){c();a({messageTypeId:l,text:"Welcome to "+o+' &mdash; check out the <a onclick="StackExchange.notify.closeFirstTime(true); return false;" href="/faq">FAQ</a>!',close:function(){StackExchange.notify.closeFirstTime()}});k()}}},showMessages:function(r,q){var o=0;var p=q?2:r.length;for(var s=0;s<p&&s<r.length;s++){if(a(r[s])){o++}}d(n,o,false);k();if(q&&o<r.length){var t=r.slice(p);h(r.length-o,t)}},show:function(p,o){c();a({text:p,messageTypeId:o});k()},close:f,closeFirstTime:function(o){e();StackExchange.helpers.fireAndForget("/analytics/user/close-welcome"+(o?"?faq=1":""));if(o){document.location="/faq?b=1"}},getMessageText:function(o){return $("#notify-"+o+" .notify-text").text()}}})();function moveScroller(){var a=$("#scroller").width();var b=function(){var e=$(window).scrollTop();var d=$("#scroller-anchor").offset().top;var c=$("#scroller");if(e>d){if(c.height()>$(window).height()){c.css({position:"fixed",top:"",bottom:"0px",width:a})}else{c.css({position:"fixed",top:"0px",bottom:"",width:a})}}else{if(e<=d){c.css({position:"relative",top:"",bottom:""})}}};$(window).scroll(b).resize(b);b()}var styleCode=(function(){function a(b){var c=$("#prettify-lang").text();if(c!=""){b.addClass(c);return true}return false}return function(){if(typeof MathJax!="undefined"){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}var b=false;$("pre code").parent().each(function(){if($(this).hasClass("prettyprint-override")){$(this).removeClass("prettyprint-override").addClass("prettyprint");b=true}if(!$(this).hasClass("prettyprint")){if(a($(this))){$(this).addClass("prettyprint");b=true}}});if(b){if(typeof jtab!="undefined"){jtab.renderimplicit();return}StackExchange.using("prettify",function(){StackExchange.prettify.applyCodeStyling()})}}})();StackExchange.helpers.MagicPopup=function(d){var a,f,b,g,c={};function h(j,l){var o=$("<div id='"+d.id+"'/>").html(l);var i=$("<div />").css({overflow:"hidden",position:"absolute",width:1,height:1,top:0,left:0}).append(o).appendTo("body");var k=d.showing(j,o);var m={left:k.left};if(k.hasOwnProperty("bottom")){m.bottom=k.bottom;m.top="auto"}else{m.top=k.top}var n;if(d.shown){n=function(){d.shown(j,o)}}i.css(m).animate({height:o.outerHeight()+8,width:o.outerWidth()+8},300,n);a=function(){i.stop().remove();if(d.removed){d.removed(j,o)}b=null;a=null};b=StackExchange.helpers.DelayedReaction(a,5);var p=i;if(k.additional){p=p.add(k.additional)}p.hover(b.cancel,b.trigger)}var e=StackExchange.helpers.DelayedReaction(function(j,i){if(g||!j){return}var k;if(d.cache&&("c_"+j in c)){k=$.Deferred().resolve(c["c_"+j])}else{k=$.ajax({type:"GET",url:j,dataType:"html"});if(d.cache){k.done(function(l){c["c_"+j]=l})}}k.done(function(l){if(a){a()}if(l==""){return}h(i,l)})},500);$(document).delegate(d.selector,{mouseenter:function(){if(b&&this===f){b.cancel();return}f=this;e.trigger(d.getUrl(this),this);g=false;return false},mouseleave:function(){g=true;e.cancel();if(b){b.trigger()}}})};StackExchange.tagmenu=(function(){var c,a;var b=function(f){c=f;if(a){return}a=true;if(StackExchange.options.isMobile){return}StackExchange.helpers.MagicPopup({selector:".post-tag:not(.user-tag)",id:"tag-menu",getUrl:d,showing:e,shown:function(h,g){if(c){c(g,$(h).text())}}});$("#interesting-tags .post-tag").addClass("user-tag")};return{init:b};function d(f){var g=$(f);var h=g.attr("href");if(!h||h.charAt(0)!="/"){return null}var i=g.text();if(i.indexOf("*")>-1){return null}g.attr("title","");return"/tags/"+encodeURIComponent(i)+"/subscriber-info"}function e(i,l){var j=$(i),f=j.offset(),g=j.outerHeight(),n={left:f.left},k=f.top+g,m=f.left+l.outerWidth();if(l.height()+k>$(window).height()+$(window).scrollTop()){n.bottom=$(window).height()-f.top-8}else{n.top=k}var h=Math.max(1024,$(window).width());if(m>h){n.left-=m-h}return n}})();StackExchange.usermenu=(function(){var a,d;var b=function(){if(a){return}a=true;if(StackExchange.options.isMobile){return}StackExchange.helpers.MagicPopup({selector:".user-hover .user-gravatar48, .user-hover .user-gravatar32",getUrl:f,cache:true,id:"user-menu",showing:e,removed:c});function f(i){var h=$(i),l=h.closest(".user-hover"),j=l.find(".user-details a").attr("href"),g=new RegExp("/users/([^/]+).*$"),k=g.exec(j);if(!k){return null}return"/users/user-info/"+k[1]}};return{init:b};function e(g,j){var k=$(g),m=k.find("img:first"),h=m.offset(),q=m.height(),o=m.width(),l=Math.max(o,q),r=64*q/l,i=64*o/l,p=j.find("img:first").css({width:i,height:r});var f=p.offset();p.css("visibility","hidden");d=m.clone().css({position:"absolute",zIndex:300,left:h.left,top:h.top,width:o,height:q}).appendTo("body");var n=function(){if(!p[0].complete){setTimeout(n,500);return}p.css("visibility","visible");d.fadeOutAndRemove()};d.animate({width:i,height:r,top:h.top+f.top},200,n);return{top:h.top,left:h.left-f.left,additional:d}}function c(g,f){d.remove()}})();StackExchange.chatAd=(function(){var a,m,q=180,e=30,d=480,o=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(/^\/questions\/\d+/i.test(window.location.pathname)){d=0}return{init:function(s){a=s.chatUrl;m=s.reloadUrl;if(s.tagBased){var r=j();if(!r){return}m+=(/\?/.test(m)?"&":"?")+"tags="+encodeURIComponent(r)}if(s.preloadData===null){i()}else{c(s.preloadData,null,null)}}};function j(){var r=$(".question .post-taglist .post-tag");if(!r.length){return null}return r.map(function(s,t){return $(t).text()}).get().join(" ")}function g(r){return r<10?"0"+r:r}function f(r){var s=new Date();s.setTime(r*1000);return[s.getUTCFullYear(),"-",g(s.getUTCMonth()+1),"-",g(s.getUTCDate())," ",g(s.getUTCHours()),":",g(s.getUTCMinutes()),":",g(s.getUTCSeconds()),"Z"].join("")}function n(t){var w=Math.floor((new Date()).getTime()/1000);var u=w-t;var x=u%60;var s=Math.floor(u/60);var v=Math.floor(u/3600);if(u<1){return"just now"}if(u<60){return x==1?"1 sec ago":x+" secs ago"}if(u<3600){return s==1?"1 min ago":s+" mins ago"}if(u<86400){return v==1?"1 hour ago":v+" hours ago"}var r=Math.floor(u/86400);if(r==1){return"yesterday"}else{if(r<=2){return r+" days ago"}}var y=new Date(t*1000);return o[y.getMonth()]+" "+y.getDate()+" at "+y.getHours()+":"+g(y.getMinutes())}function p(s){var r=$("<div />");r.text(s);return r.html().replace('"',"&quot;")}function i(){$.get(m,null,function(t,r,s){c(t,r,s)})}function k(s){var r=$('<div class="ad502-users" />');for(var v=0;v<s.length&&v<7;v++){var w=s[v];var y=w.name;if(w.lastPost){y+=": "+n(w.lastPost)}var t=a+"/users/"+w.id;var x="http://www.gravatar.com/avatar/"+w.emailhash+"?s=23&d=identicon&r=PG";var u=$('<a href="'+t+'" />');$("<img />").attr("title",y).attr("src",x).appendTo(u);r.append(u)}return r}function h(r){return $('<div class="ad502-users"><img src="'+a+"/rooms/users/"+r+'.jpeg" /></div>')}function l(t){var r=t.user;var s=t.userid;if(s){return'<a href="'+a+"/users/"+s+'">'+p(r)+"</a>"}return p(r)}function b(){if(q<=d){window.setTimeout(i,q*1000)}q+=e}function c(u,s,w){var v=$("#ad502-rooms");if(u.error){b();return}v.html("");var t=u.rooms;for(var x=0;x<t.length&&x<2;x++){var y=t[x];var z=a+"/rooms/"+y.id;var r=$('<div class="ad502-room"></div>');r.append($('<h3 class="ad502-room-h3"><span class="ad502-room-title" title="'+p(y.name)+'"><a href="'+z+'">'+p(y.name)+"</a></span></h3>"));if(y.messages&&y.messages.length>0){r.append($('<span title="'+f(y.lastPost)+'" class="ad502-last-message">'+n(y.lastPost)+" - "+l(y.messages[0])+"</span><br>"))}if(y.singleImage){r.append(h(y.id))}else{r.append(k(y.users))}v.append(r)}if(u.activeUsers>1){$("#h-chat-link").text(u.activeUsers+" People Chatting")}else{$("#h-chat-link").text("Visit Chat")}$("#h-chat-link").attr("title",u.activeUsers+" users active in "+u.activeRooms+" rooms the last 60 minutes");b()}})();StackExchange.helpers.noDiacritics=(function(){var a={"àåáâäãåą":"a","èéêëę":"e","ìíîïı":"i","òóôõöøő":"o","ùúûü":"u","çćč":"c","żźž":"z","śşš":"s","ñń":"n","ýŸ":"y","ł":"l","đ":"d","ß":"ss","ğ":"g","Þ":"th"};return function(c){for(var b in a){if(a.hasOwnProperty(b)){c=c.replace(new RegExp("["+b+"]"),a[b])}}return c}})();function sanitizeAndSplitTags(a,e){a=$.trim(a).replace(/([A-Za-z0-9])\+(?=[A-Za-z0-9])/g,"$1 ");var b=a.split(/[\s|,;]+/);var f=[];for(var d=0;d<b.length;d++){var g=StackExchange.helpers.noDiacritics(b[d].toLowerCase()).replace(/_/g,"-");var c="[^a-z0-9.#+"+(e?"*":"")+"-]";g=g.replace(new RegExp(c,"g"),"");g=g.replace(/^[#+-]+/,"");g=g.replace(/[.-]+$/,"");if(g.length>0&&$.inArray(g,f)==-1){f.push(g)}}return f}StackExchange.question=(function(){var a=function(h){if(/^#comment/.test(window.location.hash)){var m=window.location.hash.indexOf("_");var j=+window.location.hash.substring(8,m);var l=+window.location.hash.substring(m+1);var k=$("#comments-link-"+l);var f="#comment-"+j;var g=$(f).length!=0;var i=function(){$(f).css({backgroundColor:h.highlightColor});$(f).animate({backgroundColor:h.backgroundColor},2000,"linear",function(){$(this).css("background-color","")});$(f)[0].scrollIntoView(true)};if(g){i()}else{StackExchange.comments.loadAll(k).done(i)}}};var d=function(){return $("div.share-tip a[id^='link-post-']")};var b=function(h,i){var l=h!=null;if(!h){h=$('div.question div.post-menu a:contains("link")')}var k=h.closest(".post-menu, .help-menu");if(h.hasClass("share-link")){k.find(".close-share-tip").click()}else{h.addClass("share-link");var f=h.attr("id").substring("link-post-".length);var j=h.closest(".col-section").length?"section":(h.closest("div.question").length?"question":"answer");var g=$('<div class="share-tip" style="display:none">share a link to this '+j+'<input type="text" value="http://'+document.location.host+h.attr("href")+'" style="display:block; width:292px;"><a class="close-share-tip" style="float:right">close</a></div>');if(i){g.find(".close-share-tip").before('<a id="link-post-'+f+'" style="float:left">cite</a>')}g.appendTo(k).fadeIn(l?"fast":0).bind("removing",function(){h.removeClass("share-link")}).find(".close-share-tip").click(function(){g.fadeOutAndRemove()}).end().find("input[type=text]").select()}};var c=function(j){var r=$("#post-form h2:first"),m=r.wrap("<div />").parent(),i=m.wrap("<div />").parent(),g=$("<div />").prependTo(i),k=i.height(),n=$("<div />"),h=$(j),p=parseInt(r.css("margin-bottom")),l=$("#content"),q=$("#wmd-input").outerWidth(),o=1000,f=l.offset().left>r.offset().left-5&&l.css("overflow-x")!="visible";n.css({height:0,overflowY:"hidden"}).appendTo(m).append(h);i.css({height:k,position:"relative"});m.css({position:"absolute",bottom:-p,width:q});g.addClass("answer-help-background").css({position:"absolute",bottom:-p,height:0,width:q});if(f){g.css("left",0);m.animate({paddingLeft:5},o)}n.animate({height:h.height()+p+10},o);g.animate({height:h.height()+p+10+k},o);$("<div style='float:right;margin-top:10px;'><a href='#'>ok</a></div>").hide().prependTo(m).fadeIn(1000).find("a").one("click",function(t){var s=$(this).parent();setTimeout(function(){s.remove()},1);n.animate({height:0},o,function(){n.add(g).remove();r.unwrap().unwrap()});g.animate({height:0},o);if(f){m.animate({paddingLeft:0},o)}t.preventDefault()})};var e=function(){$.get("/posts/answer-help").then(c)};return{showShareTip:b,init:function(i){if(StackExchange.question.fullInit){StackExchange.question.fullInit(i)}else{StackExchange.question.bindAnonymousVoteDisclaimers()}StackExchange.comments.init({autoShowCommentHelp:i.autoShowCommentHelp});if(i.showShareTip){b()}$("input.anon-vote").live("click",function(){var j=$(this);var k=j.postId();var l=j.parent();l.closest(".question,.answer").unbind("mouseenter.helpful").unbind("mouseleave.helpful");l.text("sending feedback ...");setTimeout(function(){l.text("Thank you for your feedback.")},500);$.ajax({type:"POST",url:"/vote/anon/"+k,data:{votetypeid:(j.val()=="Yes"?2:3)},complete:function(){}})});var f=$(".was-this-helpful");var g=f.css("color");var h=$(".post-text").css("color");f.each(function(){var j=$(this);var k=j.text();var l="Was this post useful to you? &nbsp;&nbsp;<input style='display:none;' class='anon-vote' type='button' value='Yes'/> &nbsp;<input style='display:none;' class='anon-vote' type='button' value='No'/>";var m=function(){j.html(l).animate({color:h},"fast","linear").find("input").fadeIn("fast")};var n=function(){j.text(k).animate({color:g},"fast","linear")};j.closest(".answer, .question").bind("mouseenter.helpful",m).bind("mouseleave.helpful",n)});$('.post-menu a:contains("link")').live("click",function(j){if(!j.ctrlKey&&!j.metaKey){b($(this),i.showCitation);return false}});if(i.showAnswerHelp){$("#wmd-input").one("focus",e)}if(i.showCitation){d().live("click",function(){var j=$(this).closest(".post-menu");j.find(".close-share-tip").click();citation.show($(this))})}$(function(){a(i)})}}})();StackExchange.question.bindAnonymousVoteDisclaimers=function(){function a(b){return function(c){var g='Please <a href="/users/login?returnurl='+escape(document.location)+'">login or register</a> to '+b+" this post.";StackExchange.helpers.showErrorPopup($(this).parent(),g);var d="",f=$(this).prop("className"),e=$(this).closest(".answer").length?"answer":"question";if(/vote-up/.test(f)){d="?vote=up&type="+e}else{if(/vote-down/.test(f)){d="?vote=down&type="+e}else{if(/star/.test(f)){d="?vote=favorite"}}}StackExchange.helpers.fireAndForget("/analytics/user/try-vote"+d);c.preventDefault()}}$(".vote-up-off, .vote-down-off").click(a("vote for"));$("div.post-menu a[id^='flag-post-']").unbind("click").click(a("flag"));$(".star-off:not(.disabled)").live("click",a("favorite"))};StackExchange.comments=(function(){var f={};function e(g,h){this.postId=g;this.jDiv=h;this.jCommentsLink=$("#comments-link-"+g)}var c=function(){};e.prototype={checkDiscussion:c,ensureInput:c,commentsShown:c,addShow:function(h){var g=this;this.loadAllComments().done(function(){g.jCommentsLink.hide();g.checkDiscussion()});var i=this.ensureInput();if(i&&!h){i.focus()}},ajax:function(k,h,j,i){if(j&&!i){StackExchange.helpers.addSpinner(j,{"margin-left":"10px"})}var g=this;return $.ajax(k).fail(function(l){$(".error-notification").fadeOut("fast",function(){$(this).remove()});var m=l.responseText;if(!m||m.length>=100){m="An error occured"+(h?" "+h:"")}StackExchange.helpers.showErrorPopup(j||g.jDiv,m);if(j&&!i){StackExchange.helpers.removeSpinner()}}).done(StackExchange.helpers.removeSpinner).promise()},showComments:function(g){this.jDiv.find(" > table > tbody").html(g);this.jCommentsLink.text("add comment");if(typeof MathJax!="undefined"){MathJax.Hub.Queue(["Typeset",MathJax.Hub])}this.commentsShown()},loadAllComments:function(h){this.jDiv.removeClass("dno");if(!h&&!/more comment/.test($("#comments-link-"+this.postId).text())){return $.Deferred().resolve().promise()}var g=this;return this.ajax({type:"GET",url:"/posts/"+this.postId+"/comments",dataType:"html"},"while fetching comments").done(function(i){g.showComments(i)}).promise()}};function a(k){var i=k.constructor===$?k:$(k);var h=i.closest(".question, .answer, div[id^='post-']").find(".comments");var j=h.attr("id").replace(/^comments-/,"");if(f[j]){return f[j]}var g=new e(j,h);f[j]=g;return g}function b(h){var g=(h&&h.post)||document;$("a[id^='comments-link-']",g).click(function(){var i=/more comment/.test($(this).text());a(this).addShow(i)})}function d(h){for(var g in h){if(h.hasOwnProperty(g)){e.prototype[g]=h[g]}}}return{init:b,loadAll:function(g){return a(g).loadAllComments(true)},extendPostUi:d,uiForPost:a}})();StackExchange.share=(function(){function a(e,c,d){if(!window.open(e,c,d)){window.location.href=e}}function b(d,f){var e=d.indexOf("?");var c=d.indexOf("#");if(e==-1){if(c==-1){return d+"?"+f}return d.substring(0,c)+"?"+f+d.substring(c)}if(c==-1){return d+"&"+f}return d.substring(0,c)+"&"+f+d.substring(c)}return{gplus:function(c,d){d=b(d,"sgp=1");c.click(function(){a("https://plus.google.com/share?url="+d,"sharegplus","toolbar=1,status=1,resizable=1,scrollbars=1,width=600,height=500")})},twitter:function(d,e,c){e=b(e,"stw=1");d.click(function(){a("http://twitter.com/share?url="+e+"&ref=twitbtn&text="+c,"sharetwitter","toolbar=1,status=1,resizable=1,scrollbars=1,width=800,height=526")})},facebook:function(d,e,c){e=b(e,"sfb=1");d.click(function(){a("http://www.facebook.com/sharer.php?u="+e+"&ref=fbshare&t="+c,"sharefacebook","toolbar=1,status=1,resizable=1,scrollbars=1,width=626,height=436")})}}})();function initTagRenderer(b,a){if(window.tagRenderer){return}window.tagRendererRaw=function(d,f){f=f||"";var e="";if(!f){if(b&&$.inArray(d,b)>-1){e=" required-tag"}else{if(a&&$.inArray(d,a)>-1){e=" moderator-tag"}}}var c="<a class='post-tag"+e+"' href='"+f+"/questions/tagged/"+encodeURIComponent(d)+"' title=\"show questions tagged '"+d+"'\" rel='tag'>"+d+"</a>";return c};window.tagRenderer=function(c,d){return $(tagRendererRaw(c,d))}}function showFadingHelpText(a){a.wrap('<div class="dno" />').show().parent().fadeIn("slow",function(){$(this).children().unwrap()})}function initFadingHelpText(){var a={"wmd-input":"#how-to-format",tagnames:"#how-to-tag","tag-editor":"#how-to-tag",title:"#how-to-title"};var c=$("#wmd-input, #tagnames, #title, .tag-editor input");var b=function(d){var e=$(d);if(e.parent().hasClass("tag-editor")){return a["tag-editor"]}return a[$(d).attr("id")]};c.focus(function(){var d=b(this);c.each(function(){var f=b(this);if(f!=d){$(f).hide()}});var e=$(d);if(!e.is(":visible")){showFadingHelpText(e)}})}$.fn.extend({postId:function(){var a=this.first();if(!a.hasClass("answer")||!a.hasClass("question")){a=a.closest(".answer, .question")}return parseInt(a.find(".vote input")[0].value)}});StackExchange.newsletterAd=(function(){function a(e){var d=$('<div id="lightbox-panel" class="popup" style="display:block"></div>').append('<div class="popup-close"><a title="close this popup (or hit Esc)">&times;</a></div>').append(e);$('<div id="lightbox"></div>').appendTo($("body")).css("height",$(document).height()).fadeIn("fast");d.appendTo($("body")).center().fadeIn("fast").find(".popup-close").click(function(){$("#lightbox, #lightbox-panel").fadeOutAndRemove()})}function c(){var d=StackExchange.options.site.name;var e=$(['<div style="text-align: left;">','<h2 style="margin-bottom: 15px;">Subscribe to the '+d+" weekly newsletter</h2>",'<p><strong><a href="/users/login?returnurl=/newsletter/signup/redirect">Create an account on '+d+'</a> or <a href="/users/login?returnurl=/newsletter/signup/redirect">log in</a> if you already have one.</strong></p>','<form><label for="newsletter-email-input">Or, send newsletter emails to:</label> <input type="text" id="newsletter-email-input" maxlength="100" title="your email address" /> <input type="submit" value="Subscribe" id="newsletter-email-submit" /></form>',"</div>"].join(""));e.find("form").submit(function(){var g=$(this);var f=$.trim(e.find("#newsletter-email-input").val());if(f.length==0){return false}StackExchange.helpers.addSpinner(g);$.ajax({url:"/newsletter/signup/anon",type:"POST",dataType:"json",data:{email:f},success:function(j,h,i){if(j.status=="confirmed"&&!j.error){g.find("#newsletter-email-input").attr("disabled",true);g.find("#newsletter-email-submit").replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>');$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>')}else{if(j.status=="unconfirmed"&&!j.error){g.find("#newsletter-email-input").attr("disabled",true);g.find("#newsletter-email-submit").replaceWith('<span style="line-height: 120%; text-align: center;"><strong>Subscribed!</strong></span>');g.append("<br /><br/><p><em>Please click the link in the confirmation email to activate your subscription.</em></p>");$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>')}else{g.showErrorPopup(j.error||"there was a problem signing up for the newsletter<br />please try again later")}}},error:function(j,i,h){g.showErrorPopup("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner(g)}});return false});a(e)}function b(){$("#newsletter-signup").click(function(){var d=$(this);if(StackExchange.options.user.isAnonymous){c();return false}StackExchange.helpers.addSpinner("#newsletter-signup-container");$.ajax({url:"/newsletter/signup",type:"POST",dataType:"json",success:function(g,e,f){if(g.url){window.location.href=g.url}else{if(g.status=="confirmed"){$("#newsletter-signup-container").replaceWith('<div style="line-height: 200%; text-align: center;"><strong>Subscribed!</strong></div>')}else{if(g.status=="unconfirmed"){$("#newsletter-signup-container").replaceWith('<span style="line-height: 120%;"><strong>Success!</strong> Please click the link in the confirmation email to activate your subscription.</span>')}else{d.parent().showErrorPopup("there was a problem signing up for the newsletter<br />please try again later")}}}},error:function(g,f,e){d.parent().showErrorPopup("there was a problem signing up for the newsletter<br />please try again later")},complete:function(){StackExchange.helpers.removeSpinner("#newsletter-signup-container")}})});$("#newsletter-preview").click(function(){var e=$(window).height();var d=Math.min(600,e-100);var f=['<div id="newsleter-preview-pane" style="overflow: hidden; width: 660px; height: ',d,'px;">','<iframe src="',$(this).attr("href"),'" width="660" height="',d,'" frameborder="0"></iframe>',"</div>"].join("");a(f);return false})}return{init:b}})();(function(b,a,c,d){b.fn.caret=function(e,p){var j,i,k=this[0],n=b.browser.msie;if(typeof e==="object"&&typeof e.start==="number"&&typeof e.end==="number"){j=e.start;i=e.end}else{if(typeof e==="number"&&typeof p==="number"){j=e;i=p}else{if(typeof e==="string"){if((j=k.value.indexOf(e))>-1){i=j+e[a]}else{j=null}}else{if(Object.prototype.toString.call(e)==="[object RegExp]"){e=e.exec(k.value);if(e!=null){j=e.index;i=j+e[0][a]}}}}}if(typeof j!="undefined"){if(n){n=this[0].createTextRange();n.collapse(true);n.moveStart("character",j);n.moveEnd("character",i-j);n.select()}else{this[0].selectionStart=j;this[0].selectionEnd=i}this[0].focus();return this}else{if(n){i=document.selection;if(this[0].tagName.toLowerCase()!="textarea"){n=this.val();j=i[c]()[d]();j.moveEnd("character",n[a]);var m=j.text==""?n[a]:n.lastIndexOf(j.text);j=i[c]()[d]();j.moveStart("character",-n[a]);var o=j.text[a]}else{j=i[c]();i=j[d]();i.moveToElementText(this[0]);i.setEndPoint("EndToEnd",j);m=i.text[a]-j.text[a];o=m+j.text[a]}}else{m=k.selectionStart;o=k.selectionEnd}j=k.value.substring(m,o);return{start:m,end:o,text:j,replace:function(f){return k.value.substring(0,m)+f+k.value.substring(o,k.value[a])}}}}})(jQuery,"length","createRange","duplicate");StackExchange.loggedIn={};var profileLink=function(){var j;var r;var s;var c=false;var i;var m;var t;var d=function(){return $(".profile-link")};var a=function(){return $(".profile-triangle")};var k=function(){return $(".profile-popup")};var f=function(u){if(!u){u=d()}return u.hasClass("profile-link-on")};var g=function(v,u){u.toggleClass("profile-link-on",v);a().toggleClass("profile-triangle-on",v)};var p=function(u){var v=$('<div class="profile-popup" style="position:absolute; display:none;"><div class="profile-wrapper"><div class="profile-gravatar"><a href="'+j+'">'+r+'</a><ul class="profile-links"><li><a href="'+i+'">activity</a></li>'+(u.hasClass("child-meta")?"":'<li><a href="/privileges">privileges</a></li>')+'<li><a href="/users/logout">log out</a></li></ul></div><div class="profile-stats"></div><div class="profile-footer"><span class="popup-clock"></span> <a>close</a></div></div></div>');v.insertBefore(u).find(".profile-footer").click(profileLink.click);if(!c){e(v)}return v};var b=function(v){if(v.data("loading")){return}v.data("loading",true);var u=v.find(".profile-stats");u.addSpinner();$.ajax({type:"GET",url:"/users/profile-link-stats",dataType:"html",success:function(w){$(w).hide().appendTo(u).fadeIn("fast")},error:function(y,x,w){v.data("loading",false)},complete:StackExchange.helpers.removeSpinner})};var o=function(){var u=new Date();u.setTime(u.getTime()+t*1000);var v=u.getUTCHours(),w=u.getUTCMinutes();if(v<10){v="0"+v}if(w<10){w="0"+w}$(".profile-popup .popup-clock").text("UTC time "+v+":"+w)};var q=function(){if(s){return}s=setInterval(o,20000);o()};var l=function(){if(!s){return}clearInterval(s);s=null};var h=StackExchange.helpers.DelayedReaction(function(){profileLink.show()},450,{always:function(){n.cancel()}});var n=StackExchange.helpers.DelayedReaction(function(){profileLink.hide()},1000,{always:function(){h.cancel()}});var e=function(u){u.hover(h.trigger,n.trigger)};return{init:function(v,u,x,z){var w=d(),y=a();j=w.attr("href");r=v;c=u;i=x;t=z||0;y.click(profileLink.click);if(!u){e(w.add(y))}$(document).click(function(A){if(f(w)&&A.target!=w[0]&&A.target!=y[0]&&!$.contains($(".profile-wrapper")[0],A.target)){profileLink.hide()}})},click:function(){var u=d();n.cancel();h.cancel();if(f(u)){profileLink.hide()}else{profileLink.show()}},show:function(u,v){if(!u||typeof u=="number"){u=d()}if(!v){v=k()}if(!v.length){v=p(u)}if(!f(u)){v.fadeIn("fast");b(v);g(true,u);m=new Date()}q()},hide:function(u,v){if(!m||new Date().getTime()-m.getTime()<500){return}if(!u||typeof u=="number"){u=d()}if(!v){v=k()}if(f(u)){v.fadeOut("fast");g(false,u)}l()}}}();StackExchange.tagPreferences=(function(){function a(j){j=j.replace(/#/g,"ñ").replace(/\+/g,"ç").replace(/\./g,"û");if(/\*/.test(j)){return"div.tags:regex(class, t-"+j.replace(/\*/g,".*")+")"}else{return"div.t-"+j}}var h=function(j,k){return j.map(function(l,m){return $(m).text()}).filter(function(n,o){if(!k){return true}var l;if(/\*/.test(o)){l=new RegExp(o.replace(/([.+])/g,"\\$1").replace(/\*/g,".*"))}for(var n=0;n<k.length;n++){var m=k[n];if(o===m){return false}if(l&&l.test(m)){return false}}return true}).map(function(l,m){return a(m)}).get().join(",")};function f(l,m,j){var k="";if(typeof forUserId!="undefined"){k=forUserId}$.post("/users/save-preference",{fkey:StackExchange.options.user.fkey,key:l,value:m,forUserId:k},j)}var i=function(l,k,t,q,s,p){var j=$(l).val();var o=sanitizeAndSplitTags(j,true);var n=false;for(var r=0;r<o.length;r++){if($.trim(o[r]).length!=0){$(k).children().each(function(){if($(this).text()==o[r]){$(this).fadeTo(500,0.1).fadeTo(500,1);n=true;return}});if(!n){var m=$.URLEncode(o[r]);$(k).append('<a id="'+o[r]+'" href="/questions/tagged/'+m+'" class="'+q+'" title="show questions tagged \''+o[r]+"'\">"+o[r]+"</a> ");g(t)}n=false}}$(l).val("");if(s){$(l).focus()}if(!p){f(t,$(k).text())}e()};var g=function(k){var l='<span class="delete-tag" title="remove this tag"></span>',j=(k==20?"#interestingTags > .post-tag:last":k==25?"#ignoredTags > .post-tag:last":"#interestingTags > .post-tag, #ignoredTags > .post-tag");$(j).append(l).click(function(m){var n=$(m.target);if(n.is("[class^=delete-tag]")){var p=n.closest(".post-tag"),q=p.closest("div"),o=q.is("#ignoredTags")?25:20;p.remove();f(o,q.text());e();return false}})};var e=function(l,j){var n=$("#ignoredTags > a");var r=$("#interestingTags > a");var m=$("#inferredTags > a");if(l&&n.length==0&&r.length==0&&m.length==0){return}$("div.question-summary").removeClass("tagged-ignored tagged-ignored-hidden tagged-interesting");var o=h(n,j);var k=h(r,j);var q=h(m,j);if(o.length>0){var p=$("#hideIgnored").is(":checked")?"tagged-ignored-hidden":"tagged-ignored";$(o).closest("div.question-summary").addClass(p)}if(k.length>0){$(k).closest("div.question-summary").addClass("tagged-interesting")}if(q.length>0){$(q).closest("div.question-summary").addClass("tagged-interesting")}};var b=function(k,l){var m=$("#tag-menu"),j;if(l=="favorite"){j=$("#ignoredTags a").filter(function(){return $(this).text()==k});j.add(j.next()).remove();$("#interestingTag").val(k);i("#interestingTag","#interestingTags",20,"post-tag",false,true)}if(l=="ignore"){j=$("#interestingTags a").filter(function(){return $(this).text()==k});j.add(j.next()).remove();$("#ignoredTag").val(k);i("#ignoredTag","#ignoredTags",25,"post-tag",false,true)}if(l=="clear"){j=$("#ignoredTags a").filter(function(){return $(this).text()==k});j.add(j.next()).remove();j=$("#interestingTags a").filter(function(){return $(this).text()==k});j.add(j.next()).remove();e()}StackExchange.helpers.addSpinner(m);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(k)+"/favorite",data:{action:l,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(n){c(m.html($(""+n)),k)},error:function(p,o,n){},complete:StackExchange.helpers.removeSpinner})};var d=function(j,l){var k=$("#tag-menu");StackExchange.helpers.addSpinner(k);$.ajax({type:"POST",url:"/tags/"+encodeURIComponent(j)+"/subscription",data:{unsubscribe:l,fkey:StackExchange.options.user.fkey},dataType:"html",success:function(m){c(k.html($(""+m)),j)},error:function(o,n,m){},complete:StackExchange.helpers.removeSpinner})};var c=function(j,k){j.find(".tm-se-subscription").click(function(){d(k,$(this).hasClass("tm-se-unsubscribe"))}).end().find(".tm-favorite, .tm-favorite-clear, .tm-favorite-ignore").click(function(){if($(this).hasClass("tm-favorite")){b(k,"ignore")}else{if($(this).hasClass("tm-favorite-clear")){b(k,"favorite")}else{if($(this).hasClass("tm-favorite-ignore")){b(k,"clear")}}}})};return{applyPrefs:e,init:function(){StackExchange.tagmenu.init(c);if($("#interestingTags").length==0){return}g();$("#ignoredAdd").click(function(){i("#ignoredTag","#ignoredTags",25,"post-tag user-tag",true)});$("#interestingAdd").click(function(){i("#interestingTag","#interestingTags",20,"post-tag user-tag",true)});$("#hideIgnored").click(function(){f(30,$(this).is(":checked"));e()});StackExchange.using("tagAutocomplete",function(){bindTagFilterAutoComplete("#ignoredTag");bindTagFilterAutoComplete("#interestingTag")})}}})();StackExchange.question.fullInit=function(d){window.votesCast=d.votesCast;StackExchange.vote.init(d.questionId);StackExchange.question.bindSuggestedEditPopupLinks();if(d.canViewVoteCounts){StackExchange.vote.bindFetchVoteCounts()}StackExchange.vote_bounty.init(d);if(/^#autocomment/.test(window.location.hash)){var b=$(".comments-link:first");var c="#comment-"+window.location.hash.substring(12);var a=function(){var e=$(c);var f=$("<span><b>Trivial answer converted to comment</b></span>");e.find(".comment-date").append($("<br>")).append(f);e.css({backgroundColor:d.highlightColor});e.animate({backgroundColor:d.backgroundColor},2000,"linear",function(){$(this).css("background-color","")});$(c)[0].scrollIntoView(true)};if(!!d.totalCommentCount&&!!d.shownCommentCount&&d.totalCommentCount!=d.shownCommentCount){StackExchange.comments.loadAll(b).done(a)}else{a()}}};StackExchange.question.bindSuggestedEditPopupLinks=function(){$("div.post-menu a[id^='edit-pending-']").each(function(){var a=$(this);StackExchange.using("suggestedEdits",function(){a.unbind("click").click(function(){StackExchange.suggestedEdits.loadPopup($(this));return false})})})};StackExchange.vote=(function(){var b=StackExchange.helpers;var i={informModerator:-1,undoMod:0,acceptedByOwner:1,upMod:2,downMod:3,offensive:4,favorite:5,close:6,reopen:7,bountyClose:9,deletion:10,undeletion:11,spam:12};var w="View upvote and downvote totals";var I=function(J){if(!J){J="div.vote"}$(J).find(".vote-up-off").unbind("click").click(function(){e($(this))});$(J).find(".vote-down-off").unbind("click").click(function(){g($(this))})};var v=function(K){var J=K?K.closest("div.vote"):$("div.vote");return J.find(".vote-up-off, .vote-down-off").unbind("click")};var c=function(J){$.each(J,function(){var K=$("div.vote:has(input[value="+this.PostId+"])");switch(this.VoteTypeId){case i.upMod:K.find(".vote-up-off").addClass("vote-up-on");break;case i.downMod:K.find(".vote-down-off").addClass("vote-down-on");break;case i.favorite:K.find(".star-off").addClass("star-on");K.find("div.favoritecount b").addClass("favoritecount-selected");break;default:StackExchange.debug.log("site.vote.js > highlightExistingVotes has no case for "+this.VoteTypeId);break}});votesCast=null};var p=function(J){$.ajax({type:"GET",url:"/posts/"+J+"/votes",dataType:"json",success:c})};var e=function(M){var O=M.parent().find(".vote-up-off");var N=M.parent().find(".vote-down-off");var J=r(O);var K=F(N);var L=J?-1:(K?2:1);d(M,L);j(O,N);if(!J){O.addClass("vote-up-on")}o(M,J?i.undoMod:i.upMod)};var g=function(M){var O=M.parent().find(".vote-up-off");var N=M.parent().find(".vote-down-off");var J=F(N);var K=r(O);var L=J?1:(K?-2:-1);d(M,L);j(O,N);if(!J){N.addClass("vote-down-on")}o(M,J?i.undoMod:i.downMod)};var D=function(){return $("div.vote a[id^='vote-accepted-']")};var G=function(){return $("div.post-menu a[id^='lock-post-']")};var k=function(){return $("div.post-menu a[id^='flag-post-']")};var l=function(){return $("div.post-menu a[id^='protect-post-']")};var a=function(){return $("div.post-menu a[id^='unprotect-post-']")};var r=function(J){return J.hasClass("vote-up-on")};var F=function(J){return J.hasClass("vote-down-on")};var s=function(J){return J.hasClass("star-on")};var m=function(J){return J.closest("div.vote").find("input").val()};var j=function(K,J){K.removeClass("vote-up-on");J.removeClass("vote-down-on")};var d=function(N,K){var L=N.siblings("span.vote-count-post");var M;if(L.find(".vote-count-separator").length>0){var O=parseInt(L.children(":first").text(),10);var J=Math.abs(parseInt(L.children(":last").text(),10));M=O-J;L.css("cursor","pointer").unbind("click").attr("title",w).click(function(){E($(this))})}else{M=parseInt(L.text(),10)}L.text(M+K)};var o=function(J,K){v(J);var L=m(J);f(J,L,K,n)};var f=function(Q,K,R,O,J,M){var P={fkey:StackExchange.options.user.fkey};if(J){for(var N in J){P[N]=J[N]}}var L=function(){$.ajax({type:"POST",url:"/posts/"+K+"/vote/"+R,data:P,dataType:"json",success:function(S){if(S.Warning){if(confirm(S.Message)){P.ignoreWarnings="true";L()}else{if(M){M()}}}else{O(Q,K,S);if(M){M()}}},error:function(){y(Q,"An error has occurred - please retry your request.");if(M){M()}}})};L()};var n=function(J,L,M){if(M.Success){if(M.Message){C(J,M.Message)}if(M.ShowShareTip){var K=$(J).closest(".question,.answer").find('div.post-menu a:contains("link")');StackExchange.question.showShareTip(K)}}else{if(window.console&&window.console.firebug&&(!M.Message||M.Message.length<5)){y(J,"FireBug seems to be enabled, which can sometimes interfere with voting;<br>please refresh the page to see if your vote was processed.<br><br>If this persists, consider disabling FireBug for this site.")}else{y(J,M.Message);j(J,J);J.parent().find("span.vote-count-post").text(M.NewScore);if(M.LastVoteTypeId){H(J,M.LastVoteTypeId)}}}I(J.parent())};var H=function(J,K){var M,L;if(K==i.upMod){M=".vote-up-off";L="vote-up-on"}else{if(K==i.downMod){M=".vote-down-off";L="vote-down-on"}}if(M){J.closest("div.vote").find(M).addClass(L)}};var y=function(J,L,K){b.showErrorPopup(J.parent(),L,false,K)};var C=function(K,J){b.showErrorPopup(K.parent(),J,true)};var h=function(){$(".star-off:not(.disabled)").live("click",function(J){A($(this));J.preventDefault()})};var A=function(J){if(J.data("loading")){return}J.data("loading",true);var L=m(J)||J.siblings("input[type=hidden]").val();var M=J.parent().find("div.favoritecount b");var K=parseInt("0"+M.text().replace(/^\s+|\s+$/g,""),10);var N=function(){if(s(J)){J.removeClass("star-on");M.removeClass("favoritecount-selected").text((K--<=0)?"":K)}else{J.addClass("star-on");M.addClass("favoritecount-selected").text(++K)}};N();f(J,L,i.favorite,function(P,O,Q){J.data("loading",false);if(!Q.Success){N();J.parent().showErrorPopup(Q.Message)}})};var z=function(J){$("div.post-menu *[id^='delete-post-'], table.flagged-posts *[id^='delete-post-']").unbind("click").die("click").live("click",function(K){K.preventDefault();x($(this),J)})};var x=function(J,M){var K=J.attr("id").substring("delete-post-".length);var L=J.text().indexOf("undelete")>-1;if(confirm("Vote to "+(L?"un":"")+"delete this post?")){f(J,K,(L?i.undeletion:i.deletion),M||u)}};var u=function(P,O,L){var J=P.text().indexOf("undelete")>-1;if(L&&L.Success){P.text(L.Message);if(L.NewScore<0){var K=$(".question:has(a[id='delete-post-"+O+"'])").length>0;var N=K?".question, div.answer":"#answer-"+O;B($(N),!J)}else{y(P,"This post still needs "+L.NewScore+" vote(s) from other users to "+(J?"un":"")+"delete")}}else{var M=(L&&L.Message)?L.Message:"A problem occurred during "+(J?"un":"")+"deletion";b.showErrorPopup(P.parent(),M)}};var B=function(J,K){if(K){$("div.question-status:has(span:contains('delete'))").show();J.addClass("deleted-answer").find("a[id^='delete-post-']").addClass("deleted-post").end().find("div[id^='comments-']").addClass("comments-container-deleted").end().find("a[id^='comments-link-']").addClass("comments-link-deleted")}else{document.location.reload(true)}};var q=function(J){var K=J.attr("id").substring("vote-accepted-".length);D().unbind("click");f(J,K,i.acceptedByOwner,function(L,M,O){if(O.Success){$(".vote-accepted-off").removeClass("vote-accepted-on");var N=parseInt(O.Message,10);if(N==i.acceptedByOwner){L.addClass("vote-accepted-on")}else{L.removeClass("vote-accepted-on")}}else{y(L,O.Message)}D().click(function(){q($(this))})})};var E=function(J){var K=J.closest("div.vote").children('input[type="hidden"]').val();StackExchange.helpers.addSpinner(J);$.ajax({type:"GET",url:"/posts/"+K+"/vote-counts",dataType:"json",success:function(M){$(".error-notification").fadeOut("fast",function(){$(this).remove()});var L='<div style="color:green">'+M.up+'</div><div class="vote-count-separator"></div><div style="color:maroon">'+M.down+"</div>";J.html(L).unbind("click").css("cursor","default").attr("title",(M.up+" up / "+M.down+" down"))},error:function(N,M,L){StackExchange.helpers.removeSpinner();b.showErrorPopup(J.parent(),(N.responseText&&N.responseText.length<100?N.responseText:"An error occurred during vote count fetch"))}})};var t=function(){var J=$(".vote-count-post");$.each(J,function(L,M){var K=$(M);K.attr("title",w).css("cursor","pointer").unbind("click");var N=function(){E(K)};if(K.hasClass("mobile-vote-count")){return}else{K.click(N)}})};return{init:function(K){var J=!(StackExchange.options.user.isRegistered);if(J){StackExchange.question.bindAnonymousVoteDisclaimers()}else{if(votesCast==null){p(K)}else{c(votesCast)}I();l().unbind("click").click(function(L){L.preventDefault();var M=this.id.substring("protect-post-".length);if(confirm("Are you sure you want to protect this question?")){$.ajax({type:"POST",url:"/question/protect",data:{id:M,fkey:StackExchange.options.user.fkey},success:function(N){location.reload(true)}})}return false});a().unbind("click").click(function(L){L.preventDefault();var M=this.id.substring("unprotect-post-".length);if(confirm("Are you sure you want to unprotect this question?")){$.ajax({type:"POST",url:"/question/unprotect",data:{id:M,fkey:StackExchange.options.user.fkey},success:function(N){location.reload(true)}})}return false});StackExchange.vote_closingAndFlagging.init();h()}D().unbind("click").click(function(){q($(this))});z()},up:e,down:g,favorite_init:h,delete_init:z,bindFetchVoteCounts:t,highlightExistingVotes:c,submit:f,voteTypeIds:i,getPostId:m}})();StackExchange.vote_closingAndFlagging=(function(){var n=StackExchange.vote.voteTypeIds;var h;var i=function(){return $("div.post-menu a[id^='flag-post-'], div.flag-options .flag-post")};var g=function(x){var z=x.text().indexOf("open")>-1;var y=x.attr("id").substring("close-question-".length);if(z){if(confirm("Nominate this question for reopening?")){StackExchange.vote.submit(x,y,n.reopen,m)}}else{j(x,y)}};var j=function(x,A,B,y){$("#close-question-popup").remove();var z=x.parent();if(!B){x.addSpinnerAfter({padding:"0 3px"})}$.ajax({type:"GET",url:"/posts/popup/close/"+A+(B?"?isForFlagging=1":""),dataType:"html",success:function(D){var C=$(D);if(y){y.fadeOut("fast");w=C}C.appendTo(z);l(C,x,y);C.center().fadeIn("fast")},error:function(){z.showErrorPopup("Unable to load popup - please try again")},complete:StackExchange.helpers.removeSpinner})};var l=function(D,C,B){D.find(".popup-close").click(function(){D.fadeOutAndRemove();if(B){B.remove()}});var x=D.find(".popup-actions-cancel");if(B){x.text("back").click(function(){D.fadeOut("fast");B.fadeIn("fast")})}else{x.click(function(){D.fadeOutAndRemove()})}var A=D.find(".popup-submit");D.find('input[type=radio]:not(input[name="existing-close"])').click(function(){var G=$(this);var E=G.closest("li");if(E.hasClass("action-selected")){return}var F=a(G);if(!F){A.enable();D.find(".popup-active-pane li.action-selected").removeClass("action-selected");E.addClass("action-selected")}});var z=$("#duplicate-question");var y=$("#duplicate-question-id");z.helpOverlay().typeWatch({highlight:false,wait:750,captureLength:-1,callback:function(){b(A,z,questionId,y)}});$("#close-question-form").submit(function(){c(D,C,$(this),y,A);return false})};var c=function(B,A,C,z,y){if(y.attr("disabled")){return}$("#remaining-votes").addSpinner({position:"absolute",margin:"3px 0 0 5px"});y.disable();var x=(B.find("input[name=isForFlagging]").length>0),D=z.val();$.ajax({type:"POST",url:C.attr("action"),dataType:"json",data:{fkey:StackExchange.options.user.fkey,isForFlagging:x,"close-reason-id":$("#pane-main input[type=radio]:checked").val(),"migration-site-id":$('input[type=radio][id^="close-offtopic-"]:checked, input#migrate-anywhere:checked').val(),"duplicate-question-id":D},success:function(E){m(A,questionId,E,x,!!D)},error:function(G,F,E){A.parent().showErrorPopup("A problem occurred when trying to "+A.text().indexOf("open")>-1?"reopen":"close")},complete:function(){StackExchange.helpers.removeSpinner();B.fadeOutAndRemove()}})};var m=function(y,B,x,E,z){if(!E&&y.is("[id^='flag-post-'], [id^='mobile-flag-post-']")){y=y.parent().find("a[id^='close-question'], a[id^='mobile-close-post-']")}var C=(y&&y.text().indexOf("open")>-1)?"reopen":"close";if(x.Success){if(h&&h.closeCallback&&h.closeCallback(y,x)){}else{if(x.Message){var D=y.parent();if(E){D.showErrorPopup(x.Message)}else{y.text(y.text().replace(/\w?\(\d\)/,"")+" "+x.Message);D.showErrorPopup("This question still needs "+x.NewScore+" vote(s) from other users to "+C)}if(z){if(!y.closest(".mod-post-header").length){StackExchange.comments.loadAll(y)}}}else{if(x.RedirectTo){location.href=x.RedirectTo}else{location.reload(true)}}}}else{var A=null;if(x.Refresh){A=function(){location.reload(true)}}y.parent().showErrorPopup(x.Message||"A problem occurred when trying to "+C,false,A)}};var a=function(x){var y=x.attr("id").substr("close-".length);var z=$("#pane"+y);if(z.length==0){return null}$("#pane-main").removeClass("popup-active-pane").hide();z.addClass("popup-active-pane").show();$.each(z.find(".auto-load"),function(){$(this).removeClass("auto-load").addSpinner();if($(this).attr("id").indexOf("suggested-duplicates-")==0){$(this).load("/posts/popup/close-suggestions/"+$(this).attr("id").substr(21),function(){var A=$("#duplicate-question");$(this).find(".existing-linked-questions input[type=radio]").click(function(){A.hideHelpOverlay().val($(this).parent().attr("title")).keydown()})})}});x.closest("div.popup").find(".popup-actions-cancel").html("back").unbind("click").click(r);window["pane"+y]();return z};var r=function(){$(".popup-subpane").removeClass("popup-active-pane").hide();$("#pane-main").addClass("popup-active-pane").show().find("input[type=radio]:checked").removeAttr("checked").end().find("li.action-selected").removeClass("action-selected");$(".popup").find(".popup-submit").disable().end().find(".popup-actions-cancel").html("cancel").unbind("click").click(function(){$(".popup").fadeOutAndRemove()})};var b=function(A,y,z,x){var B=y.parent().find(".selected-master-preview");A.disable();B.html("");if($.trim(y.val()).length==0){return}StackExchange.helpers.addSpinner(B);$.ajax({type:"GET",url:"/posts/validate-duplicate-question/"+z,data:{val:y.val()},dataType:"json",success:function(C){if(C.success){x.val(C.id);p(B,C);A.enable()}else{if(C.title){B.html(C.title)}else{B.html("")}}},error:function(E,D,C){StackExchange.helpers.removeSpinner();StackExchange.helpers.showErrorPopup(y.parent(),(E.responseText&&E.responseText.length<100?E.responseText:"An error occurred during duplicate validation"))}})};var p=function(z,x){var y='<div class="post-text" style="max-height: 400px; overflow: auto;"><h3><a href="'+x.url+'" target="_blank">'+x.title+"</a></h3><p>"+x.body+"</p></div><p>"+x.tags+"</p>";z.html(y)};var w;var t;var o=function(x){var y=x.attr("id").substring("flag-post-".length);x.loadPopup({url:"/posts/popup/flag/"+y+(x.hasClass("show-invalid")?"?showInvalid=true":""),loaded:d,hideDescriptions:true,actionSelected:q,subformShow:v})};var d=function(x){w=null;k(x);x.find("form").submit(function(){s(x);return false});$("#flag-load-close").unbind("click").click(function(){if(t){t(x,$(this))}else{f(x,$(this))}})};var q=function(x){var y=x.find("input:radio").attr("id").substr("flag-".length);var z=y==n.offensive||y==n.spam;$(".flag-remaining-spam").toggle(z);$(".flag-remaining-inform").toggle(!z)};var k=function(y){var x=y.find(".popup-submit");var A=y.find('textarea[name="flag-reason"]');A.focus(function(){A.hideHelpOverlay();var B=A.closest("li").find("input:radio");if(!B.is(":checked")){B.attr("checked","checked")}}).charCounter({min:10,max:500,setIsValid:function(B){if(A.closest("li").find("input[type=radio][value=other]").is(":checked")){x.enable(B)}}});var z=A.closest(".action-subform");z.find("input.flag-prefilled").click(function(){x.enable()});z.find('input[value="other"]').click(function(){A.focus()});z.find("label, input:radio").css("cursor","pointer")};var v=function(x){if(!x.is(".mod-attention-subform")){return}var y=x.find('textarea[name="flag-reason"]');y.helpOverlay();if(x.find("input[value=other]:checked").length){y.focus()}else{if(!x.find("input:radio:checked").length){x.closest(".popup").find(".popup-submit").disable()}}};var f=function(A,z){z.closest("li").siblings("li").trigger("hide-action");if(w){A.fadeOut("fast");w.fadeIn("fast")}else{z.siblings(".action-name").addSpinner({margin:"0 5px"});var B=A.attr("id").substr("flag-popup-".length);var y=$("#flag-post-"+B);var x=$("#flag-isClosePopupForFlagging").val()=="true";j(y,B,x,A)}A.find(".popup-submit").disable();z.removeAttr("checked")};var s=function(y){y.find(".popup-submit").disable().siblings(".spinner-container").addSpinner();var z=y.attr("id").substr("flag-popup-".length);var x=$("#flag-post-"+z);var A=y.find('input[name="flag-post"]:checked').val();if(A==n.informModerator){e(y,z,x)}else{StackExchange.vote.submit(x,z,A,u,null,function(){y.fadeOutAndRemove()})}};var e=function(C,z,A){var x=C.find(".mod-attention-subform");var y=x.find("input:radio:checked");var B=y.val()=="other"?x.find('textarea[name="flag-reason"]').val():y.val();$.ajax({type:"POST",url:"/messages/inform-moderator-about-post/"+z,dataType:"json",data:{fkey:StackExchange.options.user.fkey,msg:B},success:function(D){A.parent().showErrorPopup(D.Message)},error:function(F,E,D){A.parent().showErrorPopup(F.responseText&&F.responseText.length<100?F.responseText:"An error occurred during submission")},complete:function(){C.fadeOutAndRemove()}})};var u=function(x,y,z){if(z.Refresh){location.reload(true)}else{x.parent().showErrorPopup(z.Message)}};return{on_close_click:function(x){t=x},flag_actionSelected:q,flag_subformShow:v,close_initPopup:l,flag_loaded:d,init:function(y){if(!h){h=y}var x=$("div.post-menu a[id^='close-question-'], table.flagged-posts input[id^='close-question-']");x.unbind("click").die("click").live("click",function(z){z.preventDefault();g($(this))});i().unbind("click").die("click").live("click",function(z){z.preventDefault();o($(this))})}}})();(function(){var j,i=StackExchange.comments,b=i.uiForPost;i.extendPostUi({ensureInput:function(){var m=this.jDiv.find('form[id^="add-comment-"]'),l=this;if(m.children().length){m.add(m.prev()).show();return m.find("textarea")}else{return d(m,"Add Comment",false,function(){l.submitNewComment()})}},commentsShown:function(){try{var m=this.jDiv.find("form[id^='add-comment-'] textarea:focus");if(m.length){StackExchange.comments.tabCompleter.init(m)}}catch(l){}},submitNewComment:function(){var o=this.jDiv.find('form[id^="add-comment-"]'),n=o.find("textarea"),m=this,l=o.find('input[type="submit"]').parent();this.ajax({type:"POST",url:"/posts/"+this.postId+"/comments",dataType:"html",data:{comment:n.val(),fkey:StackExchange.options.user.fkey}},"during comment submission",l).done(function(p){m.showComments(p);n.val("").keyup().blur();StackExchange.helpers.enableSubmitButton(o);o.add(o.prev()).hide();m.jCommentsLink.show()}).fail(function(){StackExchange.helpers.enableSubmitButton(o)})},checkDiscussion:function(){var o=this.jDiv.find("tr.is-comment-discussion"),m=this;if(!o.length){return}o.remove();var l=this.jDiv.find(".comment-form");if(l.find(".discussion-info").length){return}var n=$("<div style='margin:12px 0 3px; font-weight:bold' class='discussion-info'>Please avoid extended  discussions in comments. Would you like to <a href='#'>automatically move this discussion to chat?</a></div>").find("a").click(function(p){$(this).unbind("click");p.preventDefault();m.ajax({url:"/posts/"+m.postId+"/move-discussion-to-chat",data:{fkey:StackExchange.options.user.fkey},type:"POST"},"when trying to move the discussion to chat",l).done(function(q){if(q.success){window.location.href=q.message}else{StackExchange.helpers.showErrorPopup(l,q.message)}})}).end().prependTo(l);o.remove()}});function f(l,m){this.commentId=l;this.jComment=m;this.postUi=b(m)}f.prototype={voteUp:function(){var m=this.jComment.find(".comment-up").addClass("comment-up-on").removeClass("comment-up"),l=this;this.submitVote(2).done(function(n){if(!n.Success){m.removeClass("comment-up-on").addClass("comment-up");return}m.removeClass("comment-up-off").closest("tr").siblings("tr").remove();l.renderScore(n.NewScore)}).fail(function(){m.removeClass("comment-up-on").addClass("comment-up")})},"delete":function(){var l=this;if(confirm("Really delete this comment?")){this.submitVote(10).done(function(){l.jComment.remove()})}},flag:function(){var l=this;function m(o){var q=o.find("#comment-popup-other-text").charCounter({min:6,max:200,setIsValid:function(s){n()}}),r=o.find("#comment-popup-other").click(function(){n();q.focus()}),p=o.find(".text-counter"),n=function(){var t=o.find('input[name="comment-reason"]:checked').length==0;if(r.is(":checked")){var s=q.show().val().length;p.show();t=s<6||s>200}else{q.hide();p.hide()}o.find(".popup-submit").attr("disabled",t)};o.find("input").click(n);n();o.find("form").submit(function(){var s=(r.is(":checked")?q:o.find('input[name="comment-reason"]:checked')).val();o.fadeOutAndRemove();l.submitVote(4,s).done(function(t){if(!t.Success){return}if(t.NewScore===-1){l.jComment.remove()}else{l.jComment.find(".comment-flag, .comment-up").fadeOutAndRemove()}});return false})}this.jComment.find(".comment-flag").loadPopup({url:"/posts/comments/popup/flag/"+this.commentId,loaded:m})},edit:function(){var m=this.jComment,o=m.find('form[id^="edit-comment-"]'),l=this;m.find(" > td > *").not(o).hide();m.find("td:last").addClass("comment-form");var n=d(o,"Save Edits",true,function(){l.submitEdit()});n.val(o.find("div").text());o.show();n.focus()},cancelEdit:function(){var l=this.jComment,m=l.find('form[id^="edit-comment-"]');m.children("table").remove();m.hide();l.find("td:last").removeClass("comment-form");l.find(" > td > *").not(m).show()},submitEdit:function(){var o=this.jComment.find('form[id^="edit-comment-"]'),m=o.find("textarea"),n=m.val(),l=this;this.postUi.ajax({type:"POST",url:"/posts/comments/"+this.commentId+"/edit",dataType:"html",data:{comment:n,fkey:StackExchange.options.user.fkey}},"during comment submission",o).done(function(p){l.postUi.showComments(p)}).fail(function(){StackExchange.helpers.enableSubmitButton(o)})},submitVote:function(m,l){var n=this.jComment.find(".comment-actions");var o={type:"POST",url:"/posts/comments/{commentId}/vote/{voteTypeId}".format({commentId:this.commentId,voteTypeId:m}),dataType:"json",data:{fkey:StackExchange.options.user.fkey,text:l},success:function(p){if(!p.Success&&p.Message){StackExchange.helpers.showErrorPopup(n,p.Message)}}};return this.postUi.ajax(o,"during voting",this.jComment.find(".comment-actions"),true)},renderScore:function(m){var l="";if(m&&m>0){var n=m<5?"":m<=15?"warm":m<=30?"hot":"supernova";l+='<span title="number of \'great comment\' votes received" class="'+n+'">'+m+"</span>"}this.jComment.find(".comment-score").html(l)}};var c=function(l){l.find("textarea").keyup(function(m){if(m.which==13&&!m.shiftKey&&!$(this).prev("#tabcomplete:visible").length){l.submit()}}).keypress(function(m){if(m.which==13&&!m.shiftKey){return false}})};var d=function(n,q,r,o){var p;if(n.hasClass("mobile-comment-form")){p='<textarea name="comment" rows="2"></textarea><input type="submit" value="'+q+'"/>'}else{p='<table><tr><td><textarea name="comment" cols="68" rows="3"></textarea></td><td><input tabindex="0" type="submit" value="'+q+'"/>'+(r?'<a tabindex="0" class="edit-comment-cancel">cancel</a>':"")+'<br/><a tabindex="0" class="comment-help-link">help</a></td></tr><tr><td colspan="2"><span class="text-counter"></span><span class="form-error"></span></td></tr></table>'}n.append(p);if(r){n.find(".edit-comment-cancel").click(function(){e(n).cancelEdit()})}var l=false;var m=function(t){l=t};var s=n.find("textarea");s.charCounter({min:15,max:600,setIsValid:m}).focus(function(){StackExchange.comments.tabCompleter.init($(this))});n.find(".comment-help-link").click(a);if(j){s.one("focus",a)}n.submit(function(){if(l){StackExchange.helpers.disableSubmitButton(n);o(n)}else{n.find("span.text-counter").animate({opacity:0},100,function(){$(this).animate({opacity:1},100)})}return false});if(!StackExchange.options.desc){c(n)}return s};var a=function(p){var s=$(this).closest("tbody");var r=s.find(".comment-help-link");var m=$(".comment-help",s);var l;if(p.type=="click"){l=m.length==0||!m.is(":visible");if(!l){a.manualOnly=true}}else{if(a.manualOnly){return}else{l=true}}var o=function(){r.text(l?"hide help":"help")};if(m.length>0){if(l){m.slideDown(o)}else{m.slideUp(o)}return}if(!l){return}var n=$("<tr />").appendTo(s);var q=$("<td colspan='2' />").appendTo(n);if(a.helpText){q.html(a.helpText);$(".comment-help",q).slideDown(o)}else{StackExchange.helpers.addSpinner(r);q.load("/posts/comment-help",function(t){a.helpText=t;StackExchange.helpers.removeSpinner();$(".comment-help",this).slideDown(o)})}};function e(o){var n=o.constructor===$?o:$(o),l=n.hasClass("comment")?n:n.closest(".comment"),m=l.attr("id").replace(/^comment-/,"");return new f(m,l)}function g(m,l,n){if(!/Android/.test(navigator.userAgent)){return}$(l,m).bind("touchstart",function(o){var q=$(o.target);if(!q.is(n)){return true}var p=q.data("events");if(p&&p.click&&p.click.length){return true}q.click(function(){}).attr("data-nothing-to-see-here","X");return true})}function h(m,n,l){$(".comments",m).delegate(n,"click",function(){e(this)[l]()});g(m,".comments",n)}var k=i.init;i.init=function(m){k(m);j=m&&m.autoShowCommentHelp;var l=(m&&m.post)||document;h(l,".comment-up","voteUp");h(l,".comment-delete","delete");h(l,".comment-flag","flag");h(l,".comment-edit","edit");$("form.comment-form-expanded",l).each(function(){b(this).addShow(true)})}})();StackExchange.comments.tabCompleter=(function(){var a;var j;var f=null;function k(m){return StackExchange.helpers.noDiacritics(m.replace(/ /g,"").toLowerCase())}function h(m){var n=$("#tabcomplete");n.empty();if(m.length>5||!m.length){return}$.each(m,function(p,o){var q=$("<li/>").text(o).appendTo(n);if(o.toLowerCase()==f.toLowerCase()){q.addClass("chosen")}})}function g(){var t=j.caret().start;var n=j.val();var s=false;if(/@[^\s!?();:+"].*@/.test(n)){if(!/`/.test(n)){return null}s=true}var p=n.substring(t).search(/[\s!?();:+"\[\]\\]/);if(p==-1){p=n.length-t}var m=n.substring(0,t+p).match(/@[^\s!?();:+"\[\]\\]+$/);if(!m){return null}var o=m[0].substr(1);var r=t+p;var q=r-o.length;if(s&&/@[^\s!?();:+"]/.test(n.substr(0,q-1))){return null}return{start:q,pos:t,end:r,name:o}}function i(n){var m=g();if(m.name===n){if(!j.is(":focus")){j.focus()}return}var o=j.val();j.val(o.substring(0,m.start)+n+o.substring(m.end));var p=m.start+n.length;j.caret(p,p)}$("#tabcomplete > li").live("click",function(){$(this).parent().find("li.chosen").removeClass("chosen");i($(this).addClass("chosen").text())});function b(m){var n,q;if(m.which==9){q=$("#tabcomplete li");if(!q.length){return}var o=q.filter(".chosen").removeClass("chosen");var p=m.shiftKey?o.prev():o.next();if(!p.length){p=m.shiftKey?q.last():q.first()}n=p.addClass("chosen").text()}else{if(m.which==27){q=$("#tabcomplete li");if(!q.length){return}n=f;f=null}else{return}}m.preventDefault();i(n)}function l(r){if(r.which){switch(r.which){case 9:case 16:case 17:case 18:case 220:return}}var u=g();if(!u){f=null;h([]);return}if(f==u.name){return}var m=[];f=u.name;var q=new RegExp("^"+k(u.name).replace(/\./g,"\\."),"i");var o=a.length;for(var s=0;s<o;s++){var t=a[s];var p=t.name;var n=k(p);if(n.match(q)){m.push(p.replace(/ /g,""))}}h(m)}function e(m){if(!m){return null}return parseInt(m.replace(/^\/users\/(\d+)\/.*$/,"$1"),10)||null}var c=e($("#hlinks a.profile-link").attr("href"));function d(s){if(!StackExchange.options.enableTabCompletion||StackExchange.options.isMobile){return}var r=s.closest("div.comments");var n=r.closest(".question, .answer").find(".post-signature:last .user-details a[href^='/users/']");var m=e(n.attr("href"));var o=[];r.find("a.comment-user").each(function(v,x){var u=x.firstChild;if(u.nodeType!==3){StackExchange.debug.log("unexpected structure in comment owner link");return}var w=u.nodeValue;var y=e($(x).attr("href"));if(y===c){return}o.push({id:y,name:w})});a=[];var t={};for(var q=o.length-1;q>=0;q--){var p=o[q];if(!t[p.id]){a.push(p);t[p.id]=true}}$("#tabcomplete").remove();if(j){j.unbind($.browser.opera?"keypress":"keydown",b).unbind("keyup click",l)}if(a.length===0||(a.length===1&&a[0].id===m)){j=null;return}j=s;f=null;$("<ul id='tabcomplete' />").insertBefore(s);s.bind("keydown",b).bind("keyup click",l)}return{init:d}})();StackExchange.inlineEditing={init:function(){function a(d,b,c,e){b.fadeIn(c,e);d.hide();return}$(".post-menu .edit-post").live("click",function(g){if(g.ctrlKey||g.altKey||g.metaKey||g.shiftKey){return}var f=$(this),d=f.closest(".question, .answer");if(d.find("#edit-tags-cancel").length){StackExchange.inlineTagEditing.restoreCurrentTags(true)}$("#show-editor-button").hide();f.addSpinner();var j="";var i=d.hasClass("answer");if(i){j=" class='answer'"}var h=d.find(".postcell,.answercell");var b=h.find("> *");var c=$('<div class="inline-editor"/>').hide().appendTo(h);c.load(f.attr("href")+"-inline",function(s,w,v){var m;c.find("[tabindex]").each(function(){$(this).attr("tabindex",parseInt($(this).attr("tabindex")-20))});StackExchange.helpers.removeSpinner();if(d.offset().top<$(window).scrollTop()){$("html, body").animate({scrollTop:$(d).offset().top-55},200)}if(w=="error"){StackExchange.helpers.showErrorPopup(h,"The post could not be loaded");c.remove()}else{a(b,c,300);var x=function(r){if(StackExchange.navPrevention){if(!StackExchange.navPrevention.confirm("You have started editing this post. Abandon this edit?")){return false}StackExchange.navPrevention.stop()}$("#show-editor-button").show();a(c,r,300,function(){c.remove()});if(r.offset().top<$(window).scrollTop()){$("html, body").animate({scrollTop:$(d).offset().top-55},200)}return false};var t=function(){o.unbind("keyup",q);u.trigger(m)};var q=function(r){u.trigger(o[0].value);return true};c.find(".cancel-edit").click(function(){t();x(b)});var e=StackExchange.helpers.DelayedReaction(function(r){$.ajax({type:"POST",data:{hide:r},url:"/user/save-pref/hide-preview-for-inline-editing"})},1000,{sliding:true});var n=c.find(".hide-preview");n.click(function(){var r=c.find(".wmd-preview");var z=r.is(":visible");if(z){r.slideUp();n.text("show preview")}else{r.slideDown();n.text("hide preview")}e.trigger(z);return false});var k=c.find('input[type="submit"]');var l=k.attr("id").replace("submit-button","");var p=c.find("form");var o=c.find("#title");var y=$("#question-header a");m=o.val();var u=StackExchange.helpers.DelayedReaction(function(r){y.text(r);if(typeof MathJax!="undefined"){MathJax.Hub.Queue(["Typeset",MathJax.Hub,y[0]])}},{sliding:true});o.keyup(q);c.find("#title,.wmd-input,#tagnames,.edit-comment").keydown(function(r){if(r.ctrlKey===true&&r.keyCode==13){p.submit();return false}if(r.keyCode==27){t();x(b);return false}});p.submit(function(){var r=$(this).serialize();r.fkey=StackExchange.options.user.fkey;if(StackExchange.navPrevention){StackExchange.navPrevention.stop()}k.parent().addSpinner();$.ajax({type:"POST",dataType:"json",data:r,url:p[0].action,success:function(A){if(A.success){var B=A.html;var z=$(B).hide();h.replaceWith(z);if(!i){$("#question-header a").text(A.title)}$("html").trigger("inline-edit-complete",[z,A.title]);styleCode();x(z)}else{if(A.redirect){window.location=A.redirect}else{StackExchange.helpers.showErrorPopup(k.parent(),A.message)}}},error:function(){StackExchange.helpers.showErrorPopup(k.parent(),"An error occurred saving the edit")},complete:StackExchange.helpers.removeSpinner});return false})}});return false})}};StackExchange.vote_bounty=(function(){var d;var c=function(n,m,j){var k=$(".bounty-vote");if(j.Success){$(".bounty-notification").remove();d=false;var q=n.closest("td.votecell").parent().find("span.reputation-score:last");if(j.Message){var o=$(j.Message);q.text(o.text()).attr("title",o.attr("title"))}var h=n.closest("div.vote").find(".bounty-award-container");if(h.length>1){var p=h.filter(":first").find(".bounty-award");var l=parseInt(p.text(),10);var i=parseInt(n.text(),10);p.text("+"+(l+i));k.remove()}else{n.unbind("mouseenter mouseleave").removeClass("bounty-vote bounty-vote-off");k.not(n).remove()}}else{StackExchange.helpers.showErrorPopup(n.parent(),j.Message);k.removeClass("disabled")}};var f=function(h){if(d){return confirm("Are you sure you want to award your bounty to this answer? THIS CANNOT BE UNDONE!")}return true};var b=function(h){var i=StackExchange.vote.getPostId(h);if(!f(i)){return}$(".bounty-vote").addClass("disabled");StackExchange.vote.submit(h,i,StackExchange.vote.voteTypeIds.bountyClose,c)};var g=function(){$(".bounty-vote").hover(function(){$(this).removeClass("bounty-vote-off")},function(){$(this).addClass("bounty-vote-off")});$(".bounty-vote:not(.disabled)").live("click",function(){b($(this))})};var e=function(h){h.addSpinnerAfter({padding:"0 3px"});var i=$(h).closest(".question").find("div.vote input").val();$.ajax({type:"GET",url:"/posts/bounty/"+i,dataType:"html",success:function(k){var j=$(k);j.appendTo(h.parent());j.find(".popup-close").click(function(){j.fadeOutAndRemove()});j.center().fadeIn("fast")},error:function(){h.parent().showErrorPopup("Unable to load popup - please try again")},complete:StackExchange.helpers.removeSpinner})};var a=function(){var h=$(".bounty-link");h.click(function(){e(h)})};return{init:function(h){d=!!h.hasOpenBounty;if(h.canOpenBounty){a()}if(h.hasOpenBounty){g()}}}})();