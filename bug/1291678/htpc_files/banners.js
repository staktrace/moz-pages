var BannerTypes={topBanner:'tb',rectangle:'re',interstitial:'ist',advertorial:'ad',button:'br',articleTextad:'ac',textLinks:'tl'},BannerManager=(function(){var publicationService,tagsEnabled=false,sectionPath,adsenseVars,targeting,tags={},useAsync=false,logLoadTime,loadTimeStart,responsiveDeviceGrade='A',bannerBlockMinTime=20,bannersNotBlocked=false,getPublicationService=function(){if(!publicationService)try{publicationService=googletag.pubads();if(publicationService&&useAsync)publicationService.addEventListener('slotRenderEnded',function(event){bannersNotBlocked=true;for(var type in tags)if(tags[type]&&tags[type].bannerSlot==event.slot){renderTagAsync(type,event.isEmpty,event.size);break}})}catch(e){};return publicationService},setSectionPath=function(path){if(window.Responsive)responsiveDeviceGrade=Responsive.getCurrentDeviceGrade();if(responsiveDeviceGrade>'A'){path=path.replace(/\.site-large/,responsiveDeviceGrade=='D'?'.site-small':'.site-medium');suppressBanner(BannerTypes.interstitial);suppressBanner(BannerTypes.advertorial);suppressBanner(BannerTypes.button)};sectionPath=path},setUseAsync=function(async){useAsync=!!async},setAdsenseVars=function(clientId,pageUrl,forTest){adsenseVars={clientId:clientId,pageUrl:pageUrl,forTest:forTest}},getAdsenseVars=function(){return adsenseVars},setTargets=function(targets){targeting=targets},addTag=function(type,formats,options){if(type in tags)return;options=options||{};options.type=type;if(options.grade&&!options.grade.contains(responsiveDeviceGrade))return;tags[type]=options;var formatFilter=null;switch(type){case BannerTypes.topBanner:if(responsiveDeviceGrade>'A'){formats=[];if(responsiveDeviceGrade<='B'){formats.push([728,90])}else formats.push([320,50],[320,100]);if(responsiveDeviceGrade<='C')formats.push([468,60])}else if(screen.height&&screen.height<800)formatFilter=createFormatFilter(0,200);break;case BannerTypes.rectangle:if(responsiveDeviceGrade>'C'){formatFilter=createFormatFilter(0,250);formats.push([320,250]);formats.push([320,240])};break;case BannerTypes.articleTextad:if(responsiveDeviceGrade>'C'){formatFilter=createFormatFilter(360,0)}else if(responsiveDeviceGrade>'A')formatFilter=createFormatFilter(600,0);break};if(formatFilter)formats=formats.filter(formatFilter);if(useAsync){googletag.cmd.push(function(){createSlot(type,options,formats)})}else createSlot(type,options,formats)},createSlot=function(type,options,formats){var publicationService=getPublicationService(),sourceId=getSourceId(type),bannerSlot;if(!publicationService)return;if(type==BannerTypes.interstitial){bannerSlot=googletag.defineOutOfPageSlot(options.sectionPath||sectionPath,sourceId)}else bannerSlot=googletag.defineSlot(options.sectionPath||sectionPath,formats,sourceId);if(bannerSlot&&bannerSlot.addService){bannerSlot.addService(publicationService);if(options.targeting)setTargeting(bannerSlot,options.targeting);tags[type].bannerSlot=bannerSlot}},createFormatFilter=function(maxWidth,maxHeight){return function(format){return(maxWidth&&format[0]<=maxWidth)||(maxHeight&&format[1]<=maxHeight)}},createDomIframe=function(){var type=getTypeFromId(arguments[0]),source=getSourceForType(type),destination=source&&getDestinationForType(type);if(destination){removeClass(source,'adLoader');destination.appendChild(source)};googletag.impl.pubads._createDomIframe.apply(null,Array.slice(arguments));if(destination){destination.style.display='block';prepareDestinationForType(type,destination,getElementWidth(destination,type));onTagLoaded(tags[type],destination,true);tags[type]=null}},checkTag=function(type){var tag=tags[type],hasBanner=false;if(!tag)return;delete tags[type];var source=getSourceForType(type),destination=getDestinationForType(type),bannerWidth;if(!(source&&destination))return;stripScripts(source);if(tag.bannerSlot&&(bannerWidth=getElementWidth(source,type))){prepareDestinationForType(type,destination,bannerWidth);copyBannerContent(source,destination);hasBanner=true}else{destination.style.display='none';bannerBlockTrigger(source)};onTagLoaded(tag,destination,hasBanner)},renderTagAsync=function(type,empty,size){var tag=tags[type],hasBanner=false,destination;if(!tag)return;delete tags[type];if(type==BannerTypes.interstitial)return;if(!(destination=getDestinationForType(type)))return;if(!empty&&size){if(isFakeBanner(destination)){destination.style.display='none'}else{prepareDestinationForType(type,destination,size[0]);hasBanner=true}}else bannerBlockTrigger(destination);onTagLoaded(tag,destination,hasBanner)},bannerBlockTrigger=function(el){if(!loadTimeStart)return;if(!(el&&hasClass(el,'adLoader')))return;el.style.display='';setTimeout(function(){if(!el.offsetHeight)forceBannerBlockMessage()},10)},forceBannerBlockMessage=function(){loadTimeStart=Date.now();loadTimeLogger()},stripScripts=function(el){['script','noscript'].forEach(function(tagName){var script=el.getElementsByTagName(tagName),i=script.length;while(i--)script[i].parentNode.removeChild(script[i])})},getTypeFromId=function(id){return id&&(id.match(/^b_([a-z]+)(_tmp|$)/)||[])[1]},getElementId=function(type,postfix){return'b_'+type+(postfix||'')},getSourceId=function(type){return getElementId(type,useAsync?'':'_tmp')},getSourceForType=function(type){return type&&getById(getSourceId(type))},getDestinationForType=function(type){return type&&getById(getElementId(type))},prepareDestinationForType=function(type,el,width){switch(type){case BannerTypes.topBanner:if(width==980){el.className='takeover'}else if(width>852){el.className='billBoard'}else if(width>740){el.className='leaderBoardXL'}else if(width>480){el.className='leaderBoard'}else if(width>320){el.className='topBanner'}else el.className='mobileBanner';break;case BannerTypes.rectangle:if(width>300)el.className='mobileBanner';case BannerTypes.articleTextad:if(width>600){removeClass(el,'advertorial')}else if(width>360){el.className='topBanner';break};case BannerTypes.advertorial:case BannerTypes.textLinks:var adLabel=HTMLBuilder().built({n:'div',a:{className:'adLabel'},c:{n:'span',t:'Advertentie'}});el.insertBefore(adLabel,el.firstChild);break}},copyBannerContent=function(source,destination){if(/z-index:\s*\d{3}/i.test(source.innerHTML)||source.innerHTML.contains('Atlas')){destination.style.position='relative';destination.style.zIndex=90};removeClass(source,'adLoader');destination.appendChild(source);destination.style.display='block'},enableTags=function(doLog){if(tagsEnabled||Object.isEmpty(tags))return;tagsEnabled=true;logLoadTime=doLog;loadTimeStart=Date.now();if(useAsync){googletag.cmd.push(function(){initPublicationService()});if(window.DomLoaded)DomLoaded.load(function(){bannerBlockTrigger(getDestinationForType(BannerTypes.interstitial))});return};initPublicationService()},initPublicationService=function(){var publicationService=getPublicationService();if(publicationService)try{if(!useAsync)publicationService.enableSyncRendering();publicationService.enableSingleRequest();setTargeting(publicationService,targeting);publicationService.collapseEmptyDivs();publicationService.setCentering(true);googletag.enableServices();return}catch(e){};forceBannerBlockMessage()},displayTag=function(type){if(!tagsEnabled)return;var tag=tags[type];if(!tag)return;var displayCommand=(function(sourceId){return function(){googletag.display(sourceId)}})(getSourceId(type));if(useAsync){var asyncCommand=function(){googletag.cmd.push(displayCommand)};if(responsiveDeviceGrade>'A'&&/^(ac|re)$/.test(type)){DomLoaded.load(asyncCommand)}else asyncCommand();return};if(tag.bannerSlot){var pubads=googletag.impl&&googletag.impl.pubads;if(pubads&&!pubads._createDomIframe){pubads._createDomIframe=pubads.createDomIframe;pubads.createDomIframe=createDomIframe};displayCommand()}},displayAdSense=function(destination,slotData){if(!destination)return;if(!adsenseVars){destination.style.display='none';return};loadJS('//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js');destination.innerHTML='<ins class="adsbygoogle" style="display:block;min-width:300px;max-width:620px;height:112px;margin:0 auto" data-ad-client="'+adsenseVars.clientId+'"'+('slot'in slotData?' data-ad-slot="'+slotData.slot+'"':'')+('channel'in slotData?' data-ad-channel="'+slotData.channel+'"':'')+(adsenseVars.forTest?' data-ad-test="on"':'')+' data-override-format="true" data-page-url="'+adsenseVars.pageUrl.escapeHtml()+'"></ins>';(window.adsbygoogle=window.adsbygoogle||[]).push({});destination.style.display=''},setTargeting=function(obj,targets){if(targets)for(var type in targets)obj.setTargeting(type,targets[type])},getElementWidth=function(el,type){if(!el||el.style.display=='none'||isFakeBanner(el))return 0;var width,ad_container=getById(getElementId(type,'_tmp_ad_container'));if(ad_container&&ad_container.style.width){width=parseInt(ad_container.style.width);if(width){ad_container.style.cssText='';if(!ad_container.innerHTML.contains('360yield.com'))return width;if(ad_container.innerHTML.contains('/1x1.jpg'))return 0}};width=el.offsetWidth;var html=Ajax.stripScripts(el.innerHTML);switch(type){case BannerTypes.topBanner:var checks=['728x90','840x150','840x250','970x90','970x250','980x120'],i=checks.length;while(i--)if(html.contains(checks[i])){width=parseInt(checks[i]);break};case BannerTypes.articleTextad:if(width<468)if((i=/width(:\s*|="?)(468|728|840|970|980)/i.exec(html))){width=+i[2]}else if(/height(:\s*|="?)250/i.test(html))width=970;break};return width},isFakeBanner=function(el){return Selector('.fakeBanner',el).length>0},onTagLoaded=function(tag,destination,hasBanner){removeClass(destination,'loading');loadTimeLogger(hasBanner);if(tag.callback&&window[tag.callback])window[tag.callback](tag,hasBanner);if(!hasBanner&&tag.replacement){destination.innerHTML='';if(tag.replacement.content){destination.innerHTML=tag.replacement.content;destination.style.height='auto';destination.style.display='block';prepareDestinationForType(tag.replacement.type,destination,0)}else if(tag.replacement.provider){removeClass(destination,'advertorial');switch(tag.replacement.provider){case'adsense':displayAdSense(destination,tag.replacement);break}}}},loadTimeLogger=function(hasBanner){if(!loadTimeStart)return;var loadTime=(Date.now()-loadTimeStart)||1;loadTimeStart=0;if(!('onLine'in window.navigator&&navigator.onLine))return;if(logLoadTime)sendTrackingCommand('b_loadstats','section='+encodeURIComponent(sectionPath)+'&time='+loadTime+'&has_b='+(hasBanner?1:0));if(loadTime<bannerBlockMinTime&&!bannersNotBlocked){DomLoaded.load(showAdBlockerNotification);if(useAsync){for(var type in tags){var destination=getDestinationForType(type);if(destination){destination.style.display='none';onTagLoaded(tags[type],destination,false)}};tags={}}}},showAdBlockerNotification=function(){if(getCookie('bb'))return;if(Browser.is.mobile)return;if(responsiveDeviceGrade!='A')return;if(getById('notifications'))return;if(getById('mySubscriptionUrl')&&!jsConfig.get('debug'))return;var subscriptionShopUrl=getById('subscriptionShopUrl'),aboShopUrl=subscriptionShopUrl?subscriptionShopUrl.href:jsConfig.get('TnetBaseURL')+'aboshop',notification=document.createElement('div'),insertParent;notification.className='notificationsContainer';notification.innerHTML='<div id="notifications"><div class="notification bar notice"><a class="fancyButton close" title="sluiten" onclick="hideBannerBlockNotification(this)">&times;</a><h3>Je blokkeert onze banners :(</h3><p class="last">Door het voeren van een streng <a href="'+jsConfig.get('TnetBaseURL')+'info/over_tweakers/Advertentiebeleid">advertentiebeleid</a> proberen we irritaties en risico\'s tot een minimum te beperken. Help ons door Tweakers te <a href="'+jsConfig.get('TnetBaseURL')+'info/over_tweakers/Instructie-whitelisten">whitelisten</a> of beleef Tweakers bannervrij en <a href="'+aboShopUrl+'">word abonnee</a>! Lees meer over onze <a href="'+jsConfig.get('TnetBaseURL')+'info/over_tweakers/verdienmodel">verdienmodellen</a>.</p></div></div>';if((insertParent=getById('searchbar'))){insertParent.parentNode.insertBefore(notification,insertParent.nextSibling)}else if((insertParent=getById('top'))){insertParent.appendChild(notification)}else{insertParent=getById('layout')||document.body;insertParent.insertBefore(notification,insertParent.firstChild)}},suppressBanner=function(type){tags[type]=null},googleTagLoadCheck=function(state){if(state=='error'||!(window.googletag&&googletag._loadStarted_))forceBannerBlockMessage()};if(!window.googletag)window.googletag={cmd:[]};return{setSectionPath:setSectionPath,setUseAsync:setUseAsync,setTargets:setTargets,addTag:addTag,displayTag:displayTag,checkTag:checkTag,enableTags:enableTags,setAdsenseVars:setAdsenseVars,getAdsenseVars:getAdsenseVars,displayAdSense:displayAdSense,getDestinationForType:getDestinationForType,googleTagLoadCheck:googleTagLoadCheck}})()
function hideBannerBlockNotification(closeButton){var notification=closeButton.parentNode,notificationHolder=notification.parentNode;notificationHolder.removeChild(notification);if(!notificationHolder.children.length)notificationHolder.parentNode.parentNode.removeChild(notificationHolder.parentNode);setCookie('bb',1,null,new Date(Date.now()+30*864e5))}
function registerTakeover(type,backgroundImage,backgroundColor){var topBanner=BannerManager.getDestinationForType(BannerTypes.topBanner);if(!topBanner)return;if(backgroundImage&&screen.width>=1100){var contentArea=getById('contentArea');if(contentArea){addClass(contentArea.parentNode,'takeoverBg');contentArea.parentNode.style.cssText='background-image:url("'+backgroundImage+'");background-repeat:no-repeat;background-position:center 0px;'+(backgroundColor?'background-color:'+backgroundColor:'');if(backgroundColor){var bottomHr=Selector('#bottom .hr')[0];if(bottomHr)bottomHr.style.backgroundColor=backgroundColor}}}}